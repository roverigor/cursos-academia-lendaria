# Aula 4.4: Troubleshooting - DNS Não Funciona

**Módulo:** 4 - Domínio Customizado
**Duração:** 7 minutos
**Tipo:** Troubleshooting guide

---

## Objetivo da Aula

Ao final desta aula, o aluno vai:
- Resolver erro "Invalid Configuration"
- Resolver erro "SSL Certificate Pending"
- Usar ferramentas de diagnóstico

---

## Roteiro

### ABERTURA (15 segundos)

```
[TELA: Erro "Invalid Configuration" na Vercel]
```

**NARRAÇÃO:**

> Configurou o DNS e tá dando erro? Vamos resolver.
>
> Os dois erros mais comuns são "Invalid Configuration" e "SSL Pending".

---

### BLOCO 1: ERRO - INVALID CONFIGURATION (2.5 minutos)

```
[TELA: Mensagem "Invalid Configuration"]
```

**NARRAÇÃO:**

> **Erro:** A Vercel mostra "Invalid Configuration" no seu domínio.
>
> **O que significa:** Os registros DNS não estão apontando corretamente pra Vercel.
>
> **Diagnóstico:**

```
[SCREENCAST: whatsmydns.net]
```

> 1. Abre **whatsmydns.net**
> 2. Digita seu domínio
> 3. Seleciona tipo "A" ou "CNAME"
> 4. Clica em Search

```
[AÇÃO: Fazer a busca]
```

> Isso mostra o que os servidores DNS do mundo tão vendo.
>
> **Se aparecer o IP errado ou nada:**

```
[TELA: Resultado com problema]
```

> - Os registros não foram configurados certo
> - Ou ainda não propagaram
>
> **Soluções:**

```
[TELA: Checklist de soluções]
```

> 1. **Verifica os registros no registrador**
>    - O IP tá certo? (76.76.21.21)
>    - O CNAME tá certo? (cname.vercel-dns.com)
>    - Não tem typo?
>
> 2. **Verifica se salvou**
>    - Às vezes você edita mas esquece de salvar
>
> 3. **Espera propagar**
>    - Se você acabou de mudar, espera 15-30 minutos
>    - Atualiza o whatsmydns.net
>
> 4. **Limpa cache do navegador**
>    - Às vezes seu navegador tá cacheando o erro
>    - Testa em aba anônima

---

### BLOCO 2: ERRO - SSL CERTIFICATE PENDING (2 minutos)

```
[TELA: Mensagem "SSL Certificate Pending"]
```

**NARRAÇÃO:**

> **Erro:** Domínio tá configurado, mas SSL tá pendente.
>
> **O que significa:** A Vercel tá tentando gerar o certificado HTTPS, mas ainda não conseguiu.
>
> **Por que acontece:**
>
> O certificado SSL precisa validar que o domínio realmente aponta pra Vercel. Se o DNS ainda não propagou 100%, a validação falha.
>
> **Soluções:**

```
[TELA: Soluções]
```

> 1. **Espera**
>    - Geralmente resolve sozinho em 5-30 minutos
>    - Às vezes até algumas horas
>
> 2. **Verifica se DNS propagou**
>    - Usa whatsmydns.net
>    - Todos os servidores devem mostrar o IP certo
>
> 3. **Força re-verificação**
>    - Na Vercel, remove o domínio e adiciona de novo
>    - Isso força uma nova tentativa

```
[TELA: Removendo e re-adicionando domínio]
```

> 4. **Verifica se outro domínio tá usando**
>    - Se o domínio tá em outro projeto Vercel, remove de lá primeiro

---

### BLOCO 3: ERRO - DOMAIN ALREADY IN USE (1 minuto)

```
[TELA: Mensagem "Domain already in use"]
```

**NARRAÇÃO:**

> **Erro:** "This domain is already in use by another project"
>
> **O que significa:** Esse domínio já tá conectado em outro projeto seu na Vercel.
>
> **Solução:**
>
> 1. Vai no projeto antigo
> 2. Settings → Domains
> 3. Remove o domínio de lá
> 4. Volta no projeto novo e adiciona

```
[TELA: Removendo domínio de projeto antigo]
```

> Um domínio só pode estar em um projeto por vez.

---

### BLOCO 4: FERRAMENTAS DE DIAGNÓSTICO (1 minuto)

```
[TELA: Lista de ferramentas]
```

**NARRAÇÃO:**

> Ferramentas que salvam sua vida:
>
> **1. whatsmydns.net**
> - Verifica propagação global
> - Mostra o que cada servidor DNS vê
>
> **2. dnschecker.org**
> - Similar ao whatsmydns
> - Interface diferente
>
> **3. dig (terminal)**

```bash
dig seunome.com.br
```

> - Pra quem gosta de terminal
> - Mostra detalhes técnicos

```
[TELA: Exemplo de uso de cada ferramenta]
```

> **Dica:** Quando abrir ticket de suporte (da Vercel ou do registrador), manda screenshots dessas ferramentas. Ajuda muito.

---

### FECHAMENTO (30 segundos)

```
[TELA: Resumo de erros e soluções]
```

**NARRAÇÃO:**

> Resumo rápido:
>
> | Erro | Causa | Solução |
> |------|-------|---------|
> | Invalid Configuration | DNS errado | Verificar registros |
> | SSL Pending | DNS ainda propagando | Esperar |
> | Domain in use | Outro projeto usando | Remover do outro |
>
> 90% dos problemas de DNS são resolvidos esperando. Propagação leva tempo.
>
> Próximo módulo: como não levar sustos na conta! Custos e limites.

---

## Recursos Visuais Necessários

1. Mensagens de erro da Vercel
2. whatsmydns.net com resultado
3. Checklist de soluções
4. Processo de remover/re-adicionar domínio
5. Lista de ferramentas
6. Tabela resumo de erros

---

## Pontos-Chave para Memorização

- Invalid Config → verificar registros DNS
- SSL Pending → esperar propagação
- Domain in use → remover de outro projeto
- whatsmydns.net = melhor amigo
- Propagação pode levar horas
