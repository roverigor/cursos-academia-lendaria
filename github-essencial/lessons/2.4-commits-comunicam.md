# AULA 2.4: Commits que Comunicam

**Módulo:** 2 - Primeiro Repo Real
**Duração:** 10 minutos
**Tipo:** Conceito + Prático

---

## GPS DA AULA

### DESTINO (Onde você vai chegar)
Ao final desta aula, você vai:
- Escrever mensagens de commit profissionais
- Usar formato Conventional Commits
- Criar commits atômicos (uma mudança lógica)
- Ter histórico que conta uma história

### ORIGEM (De onde você vem)
Você provavelmente:
- Sabe fazer commits (aulas anteriores)
- Escreve mensagens como "changes" ou "update"
- Não sabia que commits são documentação do projeto

### ROTA (Como vamos chegar)
1. Entender por que mensagens importam
2. Aprender formato Conventional Commits
3. Praticar commits atômicos
4. Fazer 3+ commits profissionais

---

## ROTEIRO COMPLETO

### [ABERTURA] - 30 segundos

**[PROFESSOR DIZ:]**

> Daqui a 6 meses, você vai olhar pro código e se perguntar: "por que eu fiz isso?"
>
> Se suas mensagens de commit são "fix bug" ou "changes", você não vai ter resposta.
>
> Commits são documentação viva do projeto. Nessa aula você vai aprender a escrever mensagens que comunicam.
>
> Bora.

---

### [POR QUE MENSAGENS IMPORTAM] - 1 minuto 30 segundos

[SLIDE 1 - Comparativo de histórico]

**[PROFESSOR DIZ:]**

> Olha esse histórico:
>
> ```
> fix bug
> changes
> update
> WIP
> asdf
> ```
>
> O que você entende? Nada.
>
> [SLIDE 2 - Histórico profissional]
>
> Agora olha esse:
>
> ```
> feat: add user authentication with JWT
> fix: resolve memory leak in image upload
> docs: update API documentation
> refactor: extract validation to utils
> ```
>
> Você sabe exatamente o que cada commit faz.
>
> [Pausa]
>
> Por que isso importa na prática?
>
> **Code review:** revisor entende a mudança antes de ler o código.
>
> **Debug:** quando algo quebra, você sabe qual commit introduziu o problema.
>
> **Recrutadores:** eles olham seu histórico. Mensagens profissionais mostram maturidade.
>
> **Você mesmo:** daqui a meses, você vai agradecer.

---

### [CONVENTIONAL COMMITS] - 2 minutos

[SLIDE 3 - Estrutura do Conventional Commits]

**[PROFESSOR DIZ:]**

> Conventional Commits é um padrão usado em projetos open source e empresas.
>
> A estrutura é simples:
>
> ```
> tipo: descrição curta
> ```
>
> Os tipos principais são:
>
> **feat** - funcionalidade nova
> **fix** - correção de bug
> **docs** - documentação
> **refactor** - reescrita sem mudar comportamento
> **test** - adicionar testes
> **chore** - manutenção, dependências
>
> [SLIDE 4 - Exemplos]
>
> Exemplos práticos:
>
> ```bash
> git commit -m "feat: add dark mode toggle"
> git commit -m "fix: resolve button alignment on mobile"
> git commit -m "docs: add installation instructions"
> git commit -m "refactor: simplify authentication flow"
> git commit -m "test: add unit tests for login"
> git commit -m "chore: upgrade dependencies"
> ```
>
> [Pausa]
>
> Percebe que todas começam com o tipo, dois pontos, espaço, e depois a descrição.
>
> A descrição é no imperativo: "add", não "added". "fix", não "fixed".
>
> Pensa assim: "If applied, this commit will... add dark mode toggle".

---

### [REGRAS DE MENSAGEM] - 1 minuto 30 segundos

[SLIDE 5 - Regras]

**[PROFESSOR DIZ:]**

> Algumas regras importantes:
>
> **Título:** máximo 50 caracteres. Curto e direto.
>
> **Imperativo:** Add, Fix, Update. Não Added, Fixed, Updated.
>
> **Sem ponto final.** O título não é uma frase completa.
>
> **Específico:** "Fix navbar alignment on mobile" é melhor que "Fix bug".
>
> [SLIDE 6 - Bom vs Ruim]
>
> Comparando:
>
> **Ruim:** `fix bug` - qual bug?
>
> **Bom:** `fix: resolve null pointer in user profile display`
>
> **Ruim:** `update` - atualizou o quê?
>
> **Bom:** `docs: update installation instructions for Windows`
>
> **Ruim:** `add feature, fix bugs, update readme` - isso deveria ser 3 commits!
>
> [Pausa]
>
> Se sua mensagem precisa de vírgula ou "e", provavelmente deveria ser mais de um commit.

---

### [COMMITS ATÔMICOS] - 1 minuto

[SLIDE 7 - Commit atômico]

**[PROFESSOR DIZ:]**

> Commit atômico significa: uma mudança lógica completa.
>
> Imagine que você precisa reverter. Se o commit faz 3 coisas diferentes, você não consegue reverter só uma.
>
> **Bom - Commits separados:**
>
> ```bash
> git commit -m "feat: add user authentication"
> git commit -m "docs: update README with auth instructions"
> git commit -m "fix: correct typo in login form"
> ```
>
> **Ruim - Tudo junto:**
>
> ```bash
> git commit -m "Add auth, update readme, fix typos"
> ```
>
> [Pausa]
>
> Cada commit deveria poder ser revertido independentemente.

---

### [EXERCÍCIO AO VIVO] - 2 minutos

[SLIDE 8 - Terminal ao vivo]

**[PROFESSOR DIZ:]**

> Vamos praticar. Abre seu repo de prática.
>
> Vamos fazer 3 commits profissionais:
>
> ```bash
> cd github-practice-repo
>
> # Commit 1: Nova funcionalidade
> echo "function login() { }" >> auth.js
> git add auth.js
> git commit -m "feat: add login function placeholder"
>
> # Commit 2: Outra funcionalidade
> echo "function formatDate() { }" >> utils.js
> git add utils.js
> git commit -m "feat: add date formatting utility"
>
> # Commit 3: Documentação
> echo "## Setup" >> README.md
> git add README.md
> git commit -m "docs: add setup section to README"
> ```
>
> Agora confere o histórico:
>
> ```bash
> git log --oneline -3
> ```
>
> Você deve ver algo assim:
>
> ```
> abc1234 docs: add setup section to README
> def5678 feat: add date formatting utility
> ghi9012 feat: add login function placeholder
> ```
>
> [Pausa]
>
> Histórico limpo. Cada commit conta uma parte da história.

---

### [MENSAGEM COM CORPO] - 1 minuto

[SLIDE 9 - Commit com corpo]

**[PROFESSOR DIZ:]**

> Às vezes você precisa explicar mais. Aí você usa corpo na mensagem.
>
> Em vez de `-m`, você dá só `git commit` e abre o editor.
>
> ```bash
> git commit
> ```
>
> No editor, você escreve:
>
> ```
> fix: resolve race condition in payment processing
>
> Payment requests were occasionally processed twice when users
> clicked submit button rapidly. Added request debouncing and
> server-side idempotency check.
>
> - Implement 300ms debounce on submit button
> - Add unique transaction ID to each request
>
> Closes #245
> ```
>
> Título, linha em branco, corpo explicando o porquê.
>
> O "Closes #245" fecha automaticamente a issue 245 quando o commit for mergeado.

---

### [FECHAMENTO] - 30 segundos

[SLIDE 10 - Resumo]

**[PROFESSOR DIZ:]**

> Recapitulando:
>
> - Use Conventional Commits: `tipo: descrição`
> - Tipos: feat, fix, docs, refactor, test, chore
> - Mensagens no imperativo, máximo 50 caracteres
> - Um commit = uma mudança lógica
> - Seja específico, não genérico
>
> A partir de agora, todo commit que você fizer segue esse padrão.
>
> Na próxima aula, a gente vai aprender sobre .gitignore - como proteger credenciais e manter o repo limpo.
>
> Te vejo lá.

---

## CHECKLIST DE ENTENDIMENTO

- [ ] Uso Conventional Commits (feat, fix, docs, etc)
- [ ] Mensagens são específicas, não vagas
- [ ] Título tem máximo 50 caracteres
- [ ] Cada commit é uma mudança lógica
- [ ] Fiz 3+ commits profissionais

---

## ARTEFATO DA AULA

```
AULA 2.4 - COMMITS PROFISSIONAIS
================================

COMMITS FEITOS:
[ ] Commit 1 (feat): _______________
[ ] Commit 2 (fix/docs): _______________
[ ] Commit 3 (outro): _______________

VERIFICAÇÃO:
[ ] Todos usam tipo: no início
[ ] Mensagens são específicas
[ ] Cada commit é atômico

SCREENSHOT:
[ ] Tirei screenshot do git log --oneline
```

---

## PROMPT DE IA PARA MENSAGENS

```
Melhore minhas mensagens de commit para formato profissional.

MINHAS MENSAGENS:
1. [mensagem 1]
2. [mensagem 2]
3. [mensagem 3]

PARA CADA MENSAGEM:
1. Qual type usar? (feat, fix, docs, etc)
2. Versão melhorada do título
3. Precisa de corpo? Se sim, sugira
4. Por que a melhoria é melhor?

Use Conventional Commits. Máximo 50 chars no título.
```

---

## TROUBLESHOOTING

### Mensagem muito longa

> Quebre em título + corpo:
> ```bash
> git commit
> # Abre editor para escrever título + corpo
> ```

### Commitei arquivo errado

> Antes de push:
> ```bash
> git reset --soft HEAD~1
> # Refaça o commit corretamente
> ```

### Mensagem errada no commit

> Último commit, antes de push:
> ```bash
> git commit --amend -m "nova mensagem correta"
> ```

---

## ANEXO: SLIDES NECESSÁRIOS

| # | Título | Conteúdo |
|---|--------|----------|
| 1 | Histórico ruim | Mensagens vagas |
| 2 | Histórico bom | Mensagens claras |
| 3 | Conventional Commits | Estrutura tipo: descrição |
| 4 | Exemplos | feat, fix, docs, etc |
| 5 | Regras | 50 chars, imperativo |
| 6 | Bom vs Ruim | Comparativo lado a lado |
| 7 | Commit atômico | Uma mudança lógica |
| 8 | Terminal | Exercício ao vivo |
| 9 | Commit com corpo | Título + corpo |
| 10 | Resumo | Checklist visual |

---

## COMANDOS DA AULA (COPIAR E COLAR)

```bash
# Commit simples
git commit -m "tipo: descrição curta"

# Commit com corpo (abre editor)
git commit

# Ver histórico resumido
git log --oneline

# Ver último commit completo
git show

# Corrigir mensagem do último commit
git commit --amend -m "nova mensagem"

# Desfazer último commit (manter mudanças)
git reset --soft HEAD~1
```

---

## TIPOS DO CONVENTIONAL COMMITS

| Tipo | Quando usar | Exemplo |
|------|-------------|---------|
| feat | Nova funcionalidade | `feat: add user profile page` |
| fix | Correção de bug | `fix: resolve memory leak` |
| docs | Documentação | `docs: update README` |
| style | Formatação | `style: fix indentation` |
| refactor | Reescrita | `refactor: extract utils` |
| test | Testes | `test: add login tests` |
| chore | Manutenção | `chore: update deps` |

---

**Duração real:** 10 minutos
**Próximo:** Aula 2.5 - .gitignore Essencial
