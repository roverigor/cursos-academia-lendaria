# AULA 4.1: Voltando no Tempo (Desfazendo Erros)

**Modulo:** 4 - Sobrevivencia e Proximos Passos
**Duracao:** 10 minutos
**Tipo:** Pratico

---

## GPS DA AULA

### DESTINO (Onde voce vai chegar)
Ao final desta aula, voce vai:
- Saber descartar mudancas que nao quer mais
- Saber desfazer versoes salvas
- Guardar trabalho temporariamente
- Recuperar versoes anteriores sem medo

### ORIGEM (De onde voce vem)
Voce provavelmente:
- Sabe o fluxo completo do Git (Modulos 2 e 3)
- Ja teve medo de perder trabalho quando errou
- Nao sabe como voltar atras quando faz algo errado

### ROTA (Como vamos chegar)
1. Entender que erros sao normais e reversiveis
2. Aprender a descartar mudancas
3. Aprender a desfazer versoes salvas
4. Praticar cada comando

---

## ROTEIRO COMPLETO

### [ABERTURA] - 30 segundos

**[FALA]**

> Voce ja fez uma mudanca e depois se arrependeu? Ja salvou uma versao errada? Ja quis voltar atras mas nao sabia como?
>
> Isso acontece com todo mundo. O Git foi feito para permitir voltar atras.
>
> Nesta aula, voce vai aprender a desfazer erros com seguranca.

---

### [DESCARTAR MUDANCAS NAO SALVAS] - 1 minuto 30 segundos

[SLIDE 1 - git restore]

**[FALA]**

> Primeiro cenario: voce editou um arquivo mas quer descartar as mudancas. Quer voltar para como estava antes.
>
> O comando e:
>
> ```
> git restore nome-do-arquivo.txt
> ```
>
> O arquivo volta ao estado da ultima versao salva.
>
> [SLIDE 2 - Restore exemplos]
>
> Se voce usou `git add` mas quer tirar do preparatorio (staging):
>
> ```
> git restore --staged nome-do-arquivo.txt
> ```
>
> Isso tira do preparatorio mas mantem suas mudancas no arquivo.
>
> [Pausa]
>
> Para descartar TODAS as mudancas de uma vez:
>
> ```
> git restore .
> ```
>
> ATENCAO: as mudancas sao perdidas. Use com cuidado.

---

### [GUARDAR TEMPORARIAMENTE] - 2 minutos

[SLIDE 3 - git stash]

**[FALA]**

> Segundo cenario: voce esta trabalhando em algo, mas precisa mudar de branch urgente. Suas mudancas nao estao prontas para salvar.
>
> Se voce tentar trocar de branch, o Git reclama: "voce tem mudancas nao salvas".
>
> A solucao e guardar temporariamente:
>
> ```
> git stash
> ```
>
> [SLIDE 4 - Stash comandos]
>
> O que acontece:
>
> - Suas mudancas sao guardadas em uma "gaveta" temporaria
> - A pasta de trabalho fica limpa
> - Voce pode trocar de branch tranquilo
>
> Para recuperar depois:
>
> ```
> git stash pop
> ```
>
> Suas mudancas voltam e a "gaveta" e esvaziada.
>
> [Pausa]
>
> Se quiser guardar com uma descricao:
>
> ```
> git stash save "Trabalhando na tabela de precos"
> ```
>
> Para ver o que esta guardado:
>
> ```
> git stash list
> ```
>
> O stash e muito util quando voce precisa mudar de tarefa rapidamente.

---

### [DESFAZER VERSAO NAO ENVIADA] - 2 minutos

[SLIDE 5 - git reset]

**[FALA]**

> Terceiro cenario: voce salvou uma versao (commit) mas ainda NAO enviou para o GitHub. Quer desfazer.
>
> O comando e:
>
> ```
> git reset --soft HEAD~1
> ```
>
> Isso desfaz o ultimo commit, mas mantem suas mudancas. Voce pode editar e salvar novamente.
>
> [SLIDE 6 - Reset explicacao]
>
> `HEAD~1` significa "uma versao antes da atual". Se quiser voltar duas versoes, use `HEAD~2`.
>
> [Pausa]
>
> Se voce quer desfazer E descartar as mudancas completamente:
>
> ```
> git reset --hard HEAD~1
> ```
>
> CUIDADO: isso apaga tudo. Use so quando tem certeza que quer jogar fora.
>
> [Pausa]
>
> IMPORTANTE: so use reset em versoes que voce NAO enviou para o GitHub. Se ja enviou, use outro comando (vamos ver a seguir).

---

### [DESFAZER VERSAO JA ENVIADA] - 1 minuto 30 segundos

[SLIDE 7 - git revert]

**[FALA]**

> Quarto cenario: voce salvou E enviou para o GitHub. Mas precisa desfazer.
>
> Nao pode usar reset porque outras pessoas podem ja ter baixado.
>
> A solucao e:
>
> ```
> git revert HEAD
> ```
>
> [SLIDE 8 - Revert explicacao]
>
> O que acontece: o Git cria uma NOVA versao que desfaz as mudancas da versao anterior.
>
> E como dizer: "fiz algo errado, aqui esta a correcao".
>
> O historico e preservado - todo mundo pode ver o que aconteceu e como foi corrigido.
>
> [Pausa]
>
> Depois do revert, envie para o GitHub:
>
> ```
> git push
> ```

---

### [CORRIGIR ULTIMO COMMIT] - 1 minuto

[SLIDE 9 - git amend]

**[FALA]**

> Caso especial: voce acabou de salvar uma versao mas a mensagem ficou errada, ou esqueceu de incluir um arquivo.
>
> Se ainda NAO enviou para o GitHub, pode corrigir:
>
> ```
> git commit --amend -m "Nova mensagem corrigida"
> ```
>
> Isso substitui a mensagem da ultima versao.
>
> Se esqueceu de incluir um arquivo:
>
> ```
> git add arquivo-esquecido.txt
> git commit --amend --no-edit
> ```
>
> O `--no-edit` mantem a mensagem atual.
>
> [Pausa]
>
> Lembre: so use amend se NAO enviou para o GitHub ainda.

---

### [QUANDO USAR CADA COMANDO] - 1 minuto

[SLIDE 10 - Arvore de decisao]

**[FALA]**

> Vou resumir quando usar cada comando.
>
> **Mudanca NAO salva ainda?**
> - Use `git restore` para descartar
> - Use `git stash` para guardar temporariamente
>
> **Versao salva mas NAO enviada?**
> - Use `git reset --soft` para desfazer (mantem mudancas)
> - Use `git commit --amend` para corrigir mensagem
>
> **Versao ja enviada para GitHub?**
> - Use `git revert` para criar versao que desfaz
>
> [Pausa]
>
> A regra principal: se ja enviou para o GitHub, use revert. Se nao enviou, pode usar reset.

---

### [PRATICA] - 1 minuto

[SLIDE 11 - Pratica]

**[FALA]**

> Vamos praticar. Abra o terminal na pasta do seu projeto.
>
> **Teste o restore:**
>
> Abra o README.md e adicione uma linha qualquer. Salve o arquivo.
>
> ```
> git status
> ```
>
> Mostra que o arquivo foi modificado.
>
> ```
> git restore README.md
> ```
>
> Abra o arquivo - a linha sumiu. Voltou ao estado anterior.
>
> **Teste o stash:**
>
> Adicione outra linha no README.md.
>
> ```
> git stash
> git status
> ```
>
> Pasta limpa. Agora recupere:
>
> ```
> git stash pop
> ```
>
> A linha voltou. Agora descarte:
>
> ```
> git restore README.md
> ```
>
> Pronto. Voce sabe voltar atras!

---

### [FECHAMENTO] - 30 segundos

[SLIDE 12 - Resumo]

**[FALA]**

> Recapitulando:
>
> - `git restore` = descartar mudancas nao salvas
> - `git stash` = guardar temporariamente
> - `git reset --soft` = desfazer versao nao enviada
> - `git revert` = desfazer versao ja enviada
> - `git commit --amend` = corrigir ultima versao
>
> A regra de ouro: se ja enviou para GitHub, use revert.
>
> Na proxima aula, vamos organizar seu perfil no GitHub.
>
> Te vejo la.

---

## CHECKLIST DE ENTENDIMENTO

- [ ] Sei usar git restore para descartar mudancas
- [ ] Sei usar git stash para guardar temporariamente
- [ ] Sei usar git reset para desfazer versao nao enviada
- [ ] Sei usar git revert para desfazer versao ja enviada
- [ ] Entendo quando usar cada comando

---

## ARTEFATO DA AULA

```
AULA 4.1 - VOLTANDO NO TEMPO
============================

PRATICA RESTORE:
[ ] Editei um arquivo
[ ] Descartei com git restore
[ ] Arquivo voltou ao estado anterior

PRATICA STASH:
[ ] Fiz mudancas
[ ] Guardei com git stash
[ ] Recuperei com git stash pop

ENTENDIMENTO:
[ ] Sei a diferenca entre restore, stash, reset e revert
[ ] Sei que apos enviar para GitHub devo usar revert
```

---

## PROMPT DE IA PARA AJUDA

```
Cometi um erro no Git e preciso voltar atras.

O QUE ACONTECEU: [descreva a situacao]

JA ENVIEI PARA O GITHUB? [sim/nao]

O QUE EU QUERO: [descreva o resultado desejado]

Me ajude a:
1. Qual comando usar
2. Passo a passo completo
3. Como verificar se funcionou
```

---

## SE DER ERRO

### Quero recuperar algo que apaguei

Se voce usou reset --hard e perdeu algo, tente:

```
git reflog
```

Isso mostra o historico de onde o Git esteve. Voce pode voltar para qualquer ponto.

### Git nao deixa trocar de branch

Voce tem mudancas nao salvas. Use:

```
git stash
git checkout outra-branch
```

Depois, quando voltar, use `git stash pop`.

### Fiz reset em algo que ja tinha enviado

Se outras pessoas ja baixaram, voce vai ter problemas. Converse com elas antes de fazer qualquer coisa.

---

## ANEXO: SLIDES NECESSARIOS

| # | Titulo | Conteudo |
|---|--------|----------|
| 1 | git restore | Descartar mudancas |
| 2 | Restore exemplos | Com e sem staging |
| 3 | git stash | Guardar temporariamente |
| 4 | Stash comandos | stash, pop, list |
| 5 | git reset | Desfazer versao local |
| 6 | Reset explicacao | HEAD~1, soft vs hard |
| 7 | git revert | Desfazer versao enviada |
| 8 | Revert explicacao | Cria nova versao |
| 9 | git amend | Corrigir ultima versao |
| 10 | Arvore de decisao | Quando usar cada um |
| 11 | Pratica | Passo a passo |
| 12 | Resumo | Todos os comandos |

---

## COMANDOS DA AULA (COPIAR E COLAR)

```bash
# Descartar mudancas nao salvas
git restore nome-do-arquivo.txt

# Tirar do staging (preparatorio)
git restore --staged nome-do-arquivo.txt

# Guardar temporariamente
git stash
git stash save "Descricao"

# Recuperar do stash
git stash pop

# Ver o que esta guardado
git stash list

# Desfazer ultima versao (manter mudancas)
git reset --soft HEAD~1

# Desfazer ultima versao (descartar tudo)
git reset --hard HEAD~1

# Desfazer versao ja enviada
git revert HEAD

# Corrigir mensagem da ultima versao
git commit --amend -m "Nova mensagem"

# Ver historico completo (socorro!)
git reflog
```

---

**Duracao real:** 10 minutos
**Proximo:** Aula 4.2 - Organizando Seu Hub
