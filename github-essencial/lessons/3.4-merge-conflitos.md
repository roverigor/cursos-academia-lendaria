# AULA 3.4: Juntando Versoes (Merge e Conflitos)

**Modulo:** 3 - Colaborando com Sua Equipe
**Duracao:** 15 minutos
**Tipo:** Pratico

---

## GPS DA AULA

### DESTINO (Onde voce vai chegar)
Ao final desta aula, voce vai:
- Entender como juntar branches (merge)
- Saber o que e um conflito e por que acontece
- Resolver conflitos com calma
- Saber abortar se precisar voltar atras

### ORIGEM (De onde voce vem)
Voce provavelmente:
- Sabe criar Pull Requests e fazer revisao (aulas anteriores)
- Nunca lidou com conflitos
- Tem receio de perder trabalho ao resolver conflitos

### ROTA (Como vamos chegar)
1. Entender como conflitos acontecem
2. Aprender a identificar onde esta o conflito
3. Resolver passo a passo
4. Praticar com um exemplo

---

## ROTEIRO COMPLETO

### [ABERTURA] - 30 segundos

**[FALA]**

> As vezes, duas pessoas editam a mesma parte de um arquivo. Quando isso acontece, o Git nao sabe qual versao manter.
>
> Isso se chama "conflito". Parece assustador, mas na verdade e simples de resolver.
>
> Nesta aula, voce vai aprender a lidar com conflitos de forma tranquila.

---

### [COMO CONFLITOS ACONTECEM] - 2 minutos

[SLIDE 1 - Diagrama de conflito]

**[FALA]**

> Conflito acontece quando duas pessoas editam a **mesma parte** do **mesmo arquivo**.
>
> Imagine esse cenario:
>
> Voce esta em uma branch e muda o telefone de contato no documento para "(11) 99999-1111".
>
> Outra pessoa esta em outra branch e muda o mesmo telefone para "(11) 99999-2222".
>
> [SLIDE 2 - Duas versoes]
>
> Quando voce tenta juntar as duas branches, o Git nao sabe qual telefone manter.
>
> "(11) 99999-1111" ou "(11) 99999-2222"? Voce precisa decidir.
>
> [Pausa]
>
> Importante: conflito so acontece quando **a mesma parte** e editada de formas diferentes. Se voces editaram partes diferentes do arquivo, o Git junta automaticamente sem problema.

---

### [IDENTIFICANDO CONFLITOS] - 1 minuto

[SLIDE 3 - Mensagem de conflito]

**[FALA]**

> Quando voce tenta fazer merge e tem conflito, o Git avisa:
>
> ```
> CONFLICT (content): Merge conflict in documento.txt
> Automatic merge failed; fix conflicts and then commit the result.
> ```
>
> Isso nao e um erro grave. E o Git dizendo: "preciso que voce decida qual versao manter".
>
> [SLIDE 4 - git status durante conflito]
>
> Se voce rodar `git status`:
>
> ```
> Unmerged paths:
>   both modified:   documento.txt
> ```
>
> Mostra exatamente quais arquivos tem conflito.

---

### [ENTENDENDO OS MARCADORES] - 2 minutos

[SLIDE 5 - Marcadores de conflito]

**[FALA]**

> Quando voce abre o arquivo com conflito, voce ve algo assim:
>
> ```
> Telefone de contato:
> <<<<<<< HEAD
> (11) 99999-1111
> =======
> (11) 99999-2222
> >>>>>>> outra-branch
> ```
>
> Esses sinais sao os "marcadores de conflito".
>
> [SLIDE 6 - Explicacao dos marcadores]
>
> `<<<<<<< HEAD` - inicio do conflito, mostra sua versao
>
> `=======` - separador entre as versoes
>
> `>>>>>>> outra-branch` - fim do conflito, mostra a versao da outra branch
>
> [Pausa]
>
> Seu trabalho e: escolher qual versao manter (ou combinar as duas) e **apagar todos os marcadores**.

---

### [RESOLVENDO PASSO A PASSO] - 3 minutos

[SLIDE 7 - Passo 1]

**[FALA]**

> Vamos resolver juntos.
>
> **Passo 1: Identifique os arquivos.**
>
> ```
> git status
> ```
>
> Veja quais arquivos estao em "both modified". Esses sao os arquivos com conflito.
>
> [SLIDE 8 - Passo 2]
>
> **Passo 2: Abra o arquivo e escolha.**
>
> Voce tem 3 opcoes:
>
> **Opcao 1 - Manter sua versao:**
>
> ```
> Telefone de contato:
> (11) 99999-1111
> ```
>
> **Opcao 2 - Manter a outra versao:**
>
> ```
> Telefone de contato:
> (11) 99999-2222
> ```
>
> [SLIDE 9 - Opcao 3]
>
> **Opcao 3 - Combinar as duas:**
>
> ```
> Telefone de contato:
> (11) 99999-1111 (matriz)
> (11) 99999-2222 (filial)
> ```
>
> [Pausa]
>
> O importante: **apague todos os marcadores**. As linhas com `<<<<<<<`, `=======`, `>>>>>>>` precisam sumir.
>
> [SLIDE 10 - Passos finais]
>
> **Passo 3: Salve o arquivo.**
>
> Depois de editar, salve normalmente.
>
> **Passo 4: Marque como resolvido.**
>
> ```
> git add documento.txt
> ```
>
> **Passo 5: Finalize o merge.**
>
> ```
> git commit
> ```
>
> O Git ja sugere uma mensagem padrao. Pode aceitar.
>
> **Passo 6: Envie para o GitHub.**
>
> ```
> git push
> ```
>
> Conflito resolvido!

---

### [PRATICA] - 4 minutos

[SLIDE 11 - Pratica]

**[FALA]**

> Vamos criar e resolver um conflito de propÃ³sito.
>
> Primeiro, crie duas branches com mudancas conflitantes:
>
> ```
> git checkout main
> git checkout -b versao-matriz
> ```
>
> Abra o README.md e adicione uma linha: "Telefone: (11) 99999-1111"
>
> Salve a versao:
>
> ```
> git add .
> git commit -m "Adiciona telefone da matriz"
> ```
>
> Agora volte para main e crie outra branch:
>
> ```
> git checkout main
> git checkout -b versao-filial
> ```
>
> Abra o README.md e adicione na mesma posicao: "Telefone: (11) 99999-2222"
>
> Salve a versao:
>
> ```
> git add .
> git commit -m "Adiciona telefone da filial"
> ```
>
> [Pausa]
>
> Agora vamos causar o conflito:
>
> ```
> git checkout main
> git merge versao-matriz
> ```
>
> A primeira funciona sem problema.
>
> ```
> git merge versao-filial
> ```
>
> Agora aparece o conflito!
>
> [Pausa]
>
> Abra o README.md. Voce vera os marcadores de conflito.
>
> Edite o arquivo para ficar assim:
>
> ```
> Telefone matriz: (11) 99999-1111
> Telefone filial: (11) 99999-2222
> ```
>
> Remova todos os marcadores e salve o arquivo.
>
> Finalize:
>
> ```
> git add README.md
> git commit
> git push
> ```
>
> Pronto! Voce resolveu seu primeiro conflito.

---

### [SE QUISER DESISTIR] - 30 segundos

[SLIDE 12 - Abort]

**[FALA]**

> Se voce estiver no meio de um conflito e quiser voltar atras:
>
> ```
> git merge --abort
> ```
>
> Isso cancela o merge e volta tudo como estava antes. Nenhum dano.
>
> Use quando:
> - O conflito e muito complicado e voce quer pensar melhor
> - Voce fez merge da branch errada
> - Quer pedir ajuda antes de resolver

---

### [FECHAMENTO] - 30 segundos

[SLIDE 13 - Resumo]

**[FALA]**

> Recapitulando:
>
> - Conflitos acontecem quando duas pessoas editam a mesma parte
> - Os marcadores mostram as duas versoes: `<<<<<<<`, `=======`, `>>>>>>>`
> - Resolva escolhendo uma versao ou combinando as duas
> - Apague todos os marcadores antes de salvar
> - Use `git merge --abort` se precisar voltar atras
>
> Voce completou o Modulo 3! Agora sabe colaborar: branches, Pull Requests, revisao e conflitos.
>
> No proximo modulo, vamos aprender a desfazer erros e organizar seu perfil no GitHub.
>
> Te vejo la.

---

## CHECKLIST DE ENTENDIMENTO

- [ ] Entendo por que conflitos acontecem
- [ ] Sei identificar os marcadores de conflito
- [ ] Sei resolver conflitos editando o arquivo
- [ ] Sei usar git merge --abort se precisar
- [ ] Resolvi um conflito na pratica

---

## ARTEFATO DA AULA

```
AULA 3.4 - MERGE E CONFLITOS
============================

CONFLITO CRIADO:
[ ] Criei duas branches com mudancas conflitantes
[ ] Tentei merge e recebi mensagem de conflito

RESOLUCAO:
[ ] Identifiquei os marcadores (<<<<<<<, =======, >>>>>>>)
[ ] Escolhi qual versao manter (ou combinei)
[ ] Removi todos os marcadores
[ ] Salvei o arquivo

MERGE COMPLETO:
[ ] git add arquivo-resolvido
[ ] git commit
[ ] git push

VERIFICACAO:
[ ] O arquivo final esta correto
[ ] Nao tem mais marcadores de conflito
```

---

## PROMPT DE IA PARA AJUDA

```
Preciso resolver um conflito de merge no Git.

ARQUIVO COM CONFLITO:
[cole o conteudo do arquivo com os marcadores]

CONTEXTO:
- O que minha versao faz: [descreva]
- O que a outra versao faz: [descreva]
- O que eu quero no final: [descreva]

Me ajude a:
1. Entender o que cada versao contem
2. Decidir como combinar ou qual manter
3. Mostrar como o arquivo deve ficar no final
```

---

## SE DER ERRO

### "You have unstaged changes"

Voce tem mudancas nao salvas. Salve primeiro:

```
git add .
git commit -m "Salva mudancas antes do merge"
```

Depois tente o merge novamente.

### Conflito muito complicado

Cancele e peca ajuda:

```
git merge --abort
```

Converse com a pessoa que fez as outras mudancas para decidirem juntos.

### Esqueci de remover os marcadores

Se voce fez commit mas ainda tem marcadores no arquivo:

```
git add arquivo-corrigido
git commit --amend
```

Isso corrige o ultimo commit.

---

## ANEXO: SLIDES NECESSARIOS

| # | Titulo | Conteudo |
|---|--------|----------|
| 1 | Diagrama de conflito | Duas pessoas editando mesmo lugar |
| 2 | Duas versoes | Comparativo |
| 3 | Mensagem de conflito | O que o Git mostra |
| 4 | git status | Como ver arquivos em conflito |
| 5 | Marcadores | <<<<<<<, =======, >>>>>>> |
| 6 | Explicacao | O que cada marcador significa |
| 7 | Passo 1 | Identificar arquivos |
| 8 | Passo 2 | Escolher versao |
| 9 | Opcao 3 | Combinar versoes |
| 10 | Passos finais | add, commit, push |
| 11 | Pratica | Exercicio completo |
| 12 | Abort | Como cancelar |
| 13 | Resumo | Pontos principais |

---

## COMANDOS DA AULA (COPIAR E COLAR)

```bash
# Ver arquivos em conflito
git status

# Cancelar merge se precisar
git merge --abort

# Depois de resolver o conflito no arquivo
git add arquivo-resolvido

# Finalizar o merge
git commit

# Enviar para o GitHub
git push

# Ver historico com merges
git log --oneline
```

---

## FIM DO MODULO 3

Parabens! Voce completou o Modulo 3 - Colaborando com Sua Equipe.

Voce agora sabe:
- Criar e usar branches para versoes paralelas
- Abrir Pull Requests para propor mudancas
- Revisar trabalho de outras pessoas
- Resolver conflitos quando acontecem

**Proximo:** Modulo 4 - Sobrevivencia e Proximos Passos

---

**Duracao real:** 15 minutos
**Proximo:** Aula 4.1 - Desfazendo Erros
