# 02.2 - Normaliza√ß√£o: De Bagun√ßa para Organiza√ß√£o Visual

**M√≥dulo:** 2 - Modelagem Sem Drama
**Dura√ß√£o:** 15 minutos
**Objetivo:** Ver visualmente como normalizar uma tabela bagun√ßada
**Bloom Level:** Apply

---

## üéØ O Que Voc√™ Vai Aprender

Ao final desta aula, voc√™ vai saber como:
- ‚úÖ Identificar quando um banco t√° bagun√ßado
- ‚úÖ Reorganizar visualmente (com diagramas)
- ‚úÖ Entender por que cada mudan√ßa faz sentido
- ‚úÖ Aplicar normaliza√ß√£o em qualquer contexto

---

## üî• GANCHO EMOCIONAL (Camada 1)

Deixa eu te mostrar algo que vai fazer MUITO sentido...

Imagina que voc√™ tem um app de **Agendamentos** (tipo Calendly, mas seu).

Algu√©m criou uma tabela assim:

```
Agendamentos
| ID | Cliente_Nome | Cliente_Email | Cliente_Telefone | Servi√ßo | Pre√ßo | Data | Hora |
|----|--------------|---------------|------------------|---------|-------|------|------|
| 1  | Jo√£o Silva   | joao@mail.com | (11) 99999999    | Haircut | 50    | 01/01| 10:00|
| 2  | Jo√£o Silva   | joao@mail.com | (11) 99999999    | Barba   | 30    | 02/01| 14:00|
| 3  | Maria Santos | maria@mail.com| (21) 98888888    | Haircut | 50    | 03/01| 11:00|
| 4  | Maria Santos | maria@mail.com| (21) 98888888    | Nail    | 40    | 04/01| 15:00|
```

Consegue ver o problema?

Jo√£o aparece 2 vezes. Com EXATAMENTE os mesmos dados (nome, email, telefone).

Quando voc√™ quer adicionar um novo email para Jo√£o, voc√™ mexe em quantos lugares?

Certo... **2 lugares**. E √© f√°cil esquecer um.

Bora normalizar isso? üöÄ

---

## üìä MET√ÅFORA VISUAL (Camada 2)

Pensa numa LOJA DE ROUPAS.

**Forma Bagun√ßada:**
```
Vendas (tudo numa tabela)
| Cliente_Nome | Roupa_Nome | Roupa_Pre√ßo | Roupa_Cor | Data |
|--------------|------------|-------------|-----------|------|
| Jo√£o | Camiseta B√°sica | 50 | Azul | 01/01 |
| Jo√£o | Camiseta B√°sica | 50 | Azul | 03/01 |
| Maria | Camiseta B√°sica | 50 | Azul | 05/01 |
```

‚ùå "Camiseta B√°sica" aparece 3 vezes.
‚ùå Se o pre√ßo mudar, mudo em 3 lugares.
‚ùå Dif√≠cil de manter consist√™ncia.

---

**Forma Organizada:**
```
Clientes
| ID | Nome  | Email         |
|----|-------|---------------|
| 1  | Jo√£o  | joao@mail.com |
| 2  | Maria | maria@mail.com|

Roupas
| ID | Nome              | Pre√ßo | Cor  |
|----|-------------------|-------|------|
| 1  | Camiseta B√°sica   | 50    | Azul |

Vendas
| ID | cliente_id | roupa_id | Data  |
|----|------------|----------|-------|
| 1  | 1          | 1        | 01/01 |
| 2  | 1          | 1        | 03/01 |
| 3  | 2          | 1        | 05/01 |
```

‚úÖ Camiseta aparece s√≥ 1 vez.
‚úÖ Se pre√ßo mudar, mudo em 1 lugar.
‚úÖ F√°cil de manter consist√™ncia.

---

## üí° FUNDAMENTO CONCEITUAL (Camada 3)

Agora deixa eu te mostrar o PROCESSO para normalizar...

### Os 3 Passos da Normaliza√ß√£o (Simplificado)

**Passo 1: Identificar Duplica√ß√£o**

Olha a tabela original:
```
Agendamentos
| Cliente_Nome | Cliente_Email | Servi√ßo |
|--------------|---------------|---------|
| Jo√£o | joao@mail.com | Haircut |
| Jo√£o | joao@mail.com | Barba   | ‚Üê Jo√£o aparece 2 vezes
| Maria | maria@mail.com | Haircut |
```

**Pergunta:** Qual informa√ß√£o aparece mais de uma vez?
**Resposta:** Cliente (Jo√£o e Maria).

---

**Passo 2: Separar em Tabelas Diferentes**

Se "Cliente" aparece m√∫ltiplas vezes, ele merece sua pr√≥pria tabela:

```
Clientes
| ID | Nome  | Email         |
|----|-------|---------------|
| 1  | Jo√£o  | joao@mail.com |
| 2  | Maria | maria@mail.com|
```

---

**Passo 3: Conectar com ID (Foreign Key)**

Agora a tabela Agendamentos aponta pro ID do cliente:

```
Agendamentos
| ID | cliente_id | Servi√ßo  | Data  | Hora   |
|----|------------|----------|-------|--------|
| 1  | 1          | Haircut  | 01/01 | 10:00  |
| 2  | 1          | Barba    | 02/01 | 14:00  |
| 3  | 2          | Haircut  | 03/01 | 11:00  |
| 4  | 2          | Nail     | 04/01 | 15:00  |
```

‚úÖ Feito.

N√£o √© m√°gica.
√â l√≥gica simples.

---

### Regra de Ouro (Super Simples)

**Se uma informa√ß√£o aparece mais de uma vez, ela merece sua pr√≥pria tabela.**

Fim.

N√£o precisa saber sobre "First Normal Form" ou "Boyce-Codd".

S√≥ aplica essa regra e voc√™ t√° 90% do caminho.

---

## ‚ö° APLICA√á√ÉO PR√ÅTICA (Camada 4)

Vou te mostrar AGORA como voc√™ faria isso no Supabase...

### Exerc√≠cio Pr√°tico: Normalizar um E-commerce

**Situa√ß√£o:** Voc√™ tem uma tabela de Vendas bagun√ßada.

```
Vendas (BAGUN√áADA)
| ID | Produto_Nome | Produto_Pre√ßo | Cliente_Nome | Cliente_Email | Categoria_Nome | Data  |
|----|--------------|---------------|--------------|---------------|----------------|-------|
| 1  | Notebook     | 3000          | Jo√£o         | joao@mail.com | Eletr√¥nicos   | 01/01 |
| 2  | Mouse        | 50            | Jo√£o         | joao@mail.com | Eletr√¥nicos   | 02/01 |
| 3  | Notebook     | 3000          | Maria        | maria@mail.com| Eletr√¥nicos   | 03/01 |
| 4  | Teclado      | 200           | Maria        | maria@mail.com| Eletr√¥nicos   | 04/01 |
```

**Problemas:**
- Jo√£o aparece 2 vezes com mesmo email
- Notebook aparece 2 vezes com mesmo pre√ßo
- "Eletr√¥nicos" aparece 4 vezes

---

**Como Normalizar (Passo a Passo):**

**Passo 1: Criar tabela de Clientes**
```
Clientes
| ID | Nome  | Email         |
|----|-------|---------------|
| 1  | Jo√£o  | joao@mail.com |
| 2  | Maria | maria@mail.com|
```

**Passo 2: Criar tabela de Produtos**
```
Produtos
| ID | Nome     | Pre√ßo |
|----|----------|-------|
| 1  | Notebook | 3000  |
| 2  | Mouse    | 50    |
| 3  | Teclado  | 200   |
```

**Passo 3: Criar tabela de Categorias**
```
Categorias
| ID | Nome         |
|----|--------------|
| 1  | Eletr√¥nicos  |
```

**Passo 4: Conectar Produtos com Categorias**
```
Produtos (ATUALIZADO)
| ID | Nome     | Pre√ßo | categoria_id |
|----|----------|-------|--------------|
| 1  | Notebook | 3000  | 1            |
| 2  | Mouse    | 50    | 1            |
| 3  | Teclado  | 200   | 1            |
```

**Passo 5: Criar tabela de Vendas (Limpa)**
```
Vendas
| ID | cliente_id | produto_id | Data  |
|----|------------|------------|-------|
| 1  | 1          | 1          | 01/01 |
| 2  | 1          | 2          | 02/01 |
| 3  | 2          | 1          | 03/01 |
| 4  | 2          | 3          | 04/01 |
```

---

**Resultado?**

- ‚úÖ Jo√£o aparece 1 vez
- ‚úÖ Notebook aparece 1 vez
- ‚úÖ "Eletr√¥nicos" aparece 1 vez
- ‚úÖ Atualizo tudo em 1 lugar

---

## üåü EXPANS√ÉO FILOS√ìFICA (Camada 5)

Vou te contar uma hist√≥ria real...

Eu comecei meu primeiro app com uma tabela GIGANTE.

Tudo junto. Tudo misturado. 50 colunas.

Funcionava... por 2 meses.

Depois, um cliente falou: "Opa, nossos nomes podem ter 3 formatos diferentes".

A√≠ foi:
- Atualizar em 20 lugares
- Fazer migra√ß√£o de dados
- Quebrar queries que dependiam daquilo
- 2 dias de trabalho

Tudo porque eu SABIA que devia normalizar, mas achei que tava "perdendo tempo no come√ßo".

Spoiler: N√£o √© perder tempo.
√â ECONOMIZAR tempo.

---

E agora quando eu vejo uma tabela bagun√ßada, eu penso:

**"Isso vai dar problema em 2 meses quando o padr√£o mudar."**

Por isso normalizo DO COME√áO.

N√£o porque "√© o certo".

Porque √© mais R√ÅPIDO.

---

## ‚úÖ RECAPITULA√á√ÉO (Valida√ß√£o do Aprendizado)

Antes de ir pro exerc√≠cio, me responde:

**1. O que significa "dados duplicados"?**
Resposta: Mesma informa√ß√£o aparecendo em m√∫ltiplas linhas.

**2. Qual √© a regra de ouro da normaliza√ß√£o?**
Resposta: Se aparece mais de uma vez, merece sua pr√≥pria tabela.

**3. Qual o exemplo que mostrei?**
Resposta: Clientes repetidos ‚Üí separar em tabela Clientes.

**4. Normalizar economiza tempo quando?**
Resposta: Quando dados precisam ser atualizados (endere√ßo, pre√ßo, etc).

---

## üìù EXERC√çCIO (10 minutos)

Agora √© SUA vez.

Voc√™ recebeu esta tabela bagun√ßada de um cliente:

```
Eventos (BAGUN√áADA)
| ID | Palestrante_Nome | Palestrante_Email | Tema_Nome | Tema_Descri√ß√£o | Local | Data  |
|----|-----------------|------------------|-----------|----------------|-------|-------|
| 1  | Jo√£o Silva      | joao@mail.com   | IA        | Intelig√™ncia Artificial | SP  | 01/01 |
| 2  | Maria Santos    | maria@mail.com  | IA        | Intelig√™ncia Artificial | RJ  | 02/01 |
| 3  | Jo√£o Silva      | joao@mail.com   | Python    | Programa√ß√£o Python | SP  | 03/01 |
| 4  | Maria Santos    | maria@mail.com  | Python    | Programa√ß√£o Python | RJ  | 04/01 |
```

**Sua tarefa:**

Identifique:
1. **Quais informa√ß√µes est√£o duplicadas?**
2. **Quantas tabelas voc√™ criaria?**
3. **Como seria a tabela final?**

(Dica: Tem 3-4 tabelas escondidas a√≠ üòâ)

Quando terminar, vai pra pr√≥xima aula e vamos falar sobre o "CPF das tabelas" (chaves prim√°rias e estrangeiras).

---

## üéØ PR√ìXIMO PASSO

Na pr√≥xima aula (02.3), vamos:
- ‚úÖ Entender Chaves Prim√°rias (PK)
- ‚úÖ Entender Chaves Estrangeiras (FK)
- ‚úÖ Por que elas se chamam "CPF das tabelas"

Spoiler: voc√™ vai entender em 5 minutos.

Bora? üöÄ

---

*Aula criada por Jos√© Amorim (Professor Socr√°tico)*
*Framework: Espiral Expansiva + Anti-Impostor Design*
*Dura√ß√£o estimada: 15 minutos (+ 10 min exerc√≠cio)*
