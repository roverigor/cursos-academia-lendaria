# 04.2 - SELECT: Buscando Dados

**MÃ³dulo:** 4 - SQL Essencial com IA
**DuraÃ§Ã£o:** 12 minutos
**Objetivo:** Dominar SELECT com WHERE, ORDER BY, LIMIT
**Bloom Level:** Apply
**Sources:** PostgreSQL SELECT Docs | Supabase SQL Editor Guide

---

## ğŸ¯ O Que VocÃª Vai Aprender

Ao final desta aula, vocÃª vai saber como:
- âœ… Usar SELECT para buscar dados especÃ­ficos
- âœ… Filtrar com WHERE
- âœ… Ordenar com ORDER BY
- âœ… Limitar resultados com LIMIT
- âœ… Combinar tudo junto

---

## ğŸ”¥ GANCHO EMOCIONAL (Camada 1)

VocÃª tem 1 MILHÃƒO de clientes no seu banco.

VocÃª quer **APENAS** os que:
- SÃ£o de SÃ£o Paulo
- Compraram depois de janeiro
- Gastaram mais de 1 mil reais
- Ordenar pelos que mais compraram
- Ver sÃ³ os top 10

**SELECT te permite fazer EXATAMENTE isso.**

Sem baixar 1 milhÃ£o de registros.

SÃ³ os que vocÃª pediu.

---

Ã‰ tipo vocÃª dizer pro Google:

"Quero fotos... que sÃ£o minhas... de 2024... que tÃªm gatos... mostra as 10 mais recentes"

Google nÃ£o mostra todas as 10 BILHÃ•ES de fotos.

Mostra APENAS essas 10.

SELECT faz isso no banco.

---

## ğŸ  METÃFORA VISUAL (Camada 2)

Imagina vocÃª num **supermercado gigante com 1 MILHÃƒO de produtos**.

âŒ **Ruim:** "DÃ¡ todos os produtos"
- Recebe tudo na sua casa (impossÃ­vel)
- Demora dias pra procurar o que quer
- DesperdiÃ§a espaÃ§o

âœ… **Bom:** "Quero... leite... que Ã© de marca X... que custa menos de 5 reais... mostra os 3 mais recentes"
- Mostra APENAS 3 opÃ§Ãµes
- VocÃª escolhe rÃ¡pido
- Leva pra casa

---

SELECT Ã© assim.

VocÃª diz EXATAMENTE o que quer.

Banco devolve EXATAMENTE aquilo.

Nada mais, nada menos.

---

## ğŸ’¡ FUNDAMENTO CONCEITUAL (Camada 3)

Deixa eu te mostrar cada clÃ¡usula...

### ClÃ¡usula 1: SELECT (O QuÃª)

```sql
SELECT *
FROM usuarios;
```

**"*" significa TODAS as colunas**

```sql
SELECT nome, email
FROM usuarios;
```

**Especificar colunas = mais rÃ¡pido**

---

**âš ï¸ IMPORTANTE (Best Practice 2025):**
```sql
âŒ SELECT *         â† Carrega dados desnecessÃ¡rios
âœ… SELECT nome, email  â† Carrega sÃ³ o que precisa
```

Quando tem milhÃµes de registros, essa diferenÃ§a Ã© GIGANTE.

---

### ClÃ¡usula 2: WHERE (Filtro)

```sql
SELECT nome, email
FROM usuarios
WHERE cidade = 'SÃ£o Paulo';
```

**"Mostre nome e email APENAS dos usuÃ¡rios de SP"**

---

**Operadores Comuns:**

```sql
= (igual)
WHERE id = 5

!= (diferente)
WHERE status != 'Cancelado'

> (maior)
WHERE idade > 18

< (menor)
WHERE preco < 100

>= (maior ou igual)
WHERE saldo >= 1000

<= (menor ou igual)
WHERE data <= '2024-01-01'

IN (dentro de lista)
WHERE cidade IN ('SP', 'RJ', 'MG')

LIKE (busca por texto)
WHERE nome LIKE 'JoÃ£o%'
```

---

**Combinando Filtros:**

```sql
WHERE cidade = 'SÃ£o Paulo' AND idade > 18
-- AND significa: AMBAS as condiÃ§Ãµes precisam ser verdadeiras

WHERE status = 'Ativo' OR status = 'Trial'
-- OR significa: QUALQUER UMA das condiÃ§Ãµes ser verdadeira

WHERE nome LIKE '%Silva' AND cidade = 'SÃ£o Paulo'
-- Nomes terminam em Silva, de SÃ£o Paulo
```

---

### ClÃ¡usula 3: ORDER BY (OrdenaÃ§Ã£o)

```sql
SELECT nome, data_criacao
FROM usuarios
ORDER BY data_criacao DESC;
```

**Ordenar do mais recente para o mais antigo (DESC = Descendente)**

---

**OpÃ§Ãµes:**

```sql
ORDER BY nome ASC
-- AlfabÃ©tico A-Z

ORDER BY nome DESC
-- AlfabÃ©tico Z-A

ORDER BY total_gasto DESC
-- Do maior gasto para o menor

ORDER BY data_criacao ASC, nome ASC
-- Primeiro por data, depois por nome (mÃºltiplas colunas)
```

---

### ClÃ¡usula 4: LIMIT (Quantidade)

```sql
SELECT nome, email
FROM usuarios
ORDER BY data_criacao DESC
LIMIT 10;
```

**"Mostre apenas 10 resultados"**

---

**Casos de Uso:**

```sql
LIMIT 1
-- Apenas 1 resultado (usar quando quer "o primeiro")

LIMIT 10
-- Top 10

LIMIT 100
-- Para paginaÃ§Ã£o: primeira pÃ¡gina (resultados 1-100)

LIMIT 100 OFFSET 100
-- Para paginaÃ§Ã£o: segunda pÃ¡gina (resultados 101-200)
```

---

## âš¡ APLICAÃ‡ÃƒO PRÃTICA (Camada 4)

Agora vocÃª vai **ESCREVER queries reais** ...

### Scenario 1: Busca Simples

**Requisito:** "Quero todos os clientes da tabela clientes"

```sql
SELECT *
FROM clientes;
```

---

### Scenario 2: Com Filtro

**Requisito:** "Quero clientes de SP que tÃ£o ativos"

```sql
SELECT nome, email
FROM clientes
WHERE cidade = 'SÃ£o Paulo' AND status = 'Ativo';
```

---

### Scenario 3: Ordenado

**Requisito:** "Quero os 10 clientes que mais gastaram"

```sql
SELECT nome, total_gasto
FROM clientes
ORDER BY total_gasto DESC
LIMIT 10;
```

---

### Scenario 4: Buscas Complexas

**Requisito:** "Quero clientes de SP ou RJ, que criaram conta depois de 2024, que gastaram mais de 500, mostra top 5"

```sql
SELECT nome, email, total_gasto, data_criacao
FROM clientes
WHERE (cidade = 'SÃ£o Paulo' OR cidade = 'Rio de Janeiro')
  AND data_criacao > '2024-01-01'
  AND total_gasto > 500
ORDER BY total_gasto DESC
LIMIT 5;
```

---

## ğŸŒŸ EXPANSÃƒO FILOSÃ“FICA (Camada 5)

Sabe por que SELECT Ã© importante?

Porque 95% das operaÃ§Ãµes que vocÃª faz Ã© LEITURA.

VocÃª nÃ£o quer inserir/atualizar/deletar.

VocÃª quer PERGUNTAR coisas.

---

E aqui tÃ¡ o super poder:

**Com SELECT bem feita, vocÃª pode responder qualquer pergunta do negÃ³cio em SEGUNDOS.**

"Quantos clientes temos?"
```sql
SELECT COUNT(*) FROM clientes;
```

"Qual Ã© o cliente que gastou mais?"
```sql
SELECT nome, MAX(total_gasto) FROM clientes;
```

"Qual Ã© a renda mÃ©dia por cidade?"
```sql
SELECT cidade, AVG(total_gasto) FROM clientes GROUP BY cidade;
```

---

Essas perguntas simples sÃ£o a diferenÃ§a entre:
- âŒ Gastar 2 horas pegando relatÃ³rio no backend
- âœ… Rodar query em 1 segundo

---

E tem mais: vocÃª nÃ£o precisa DECORAR SELECT.

Se vocÃª esquece a sintaxe, vocÃª pede pro ChatGPT:

"Quero: clientes de SP, que tÃ£o ativos, os 10 que mais gastaram"

ChatGPT:
```sql
SELECT nome, email, total_gasto
FROM clientes
WHERE cidade = 'SÃ£o Paulo' AND status = 'Ativo'
ORDER BY total_gasto DESC
LIMIT 10;
```

VocÃª:
- Entende o que tÃ¡ acontecendo âœ…
- Consegue copiar/colar âœ…
- Aprende vendo exemplos âœ…

---

## âœ… RECAPITULAÃ‡ÃƒO (ValidaÃ§Ã£o do Aprendizado)

Antes de continuar:

**1. Por que evitar SELECT * com muitos dados?**
Resposta: Carrega colunas desnecessÃ¡rias, fica lento.

**2. Como filtrar por mÃºltiplas condiÃ§Ãµes?**
Resposta: AND (ambas verdadeiras) ou OR (qualquer uma verdadeira).

**3. Qual a diferenÃ§a entre ASC e DESC?**
Resposta: ASC = crescente (A-Z), DESC = decrescente (Z-A).

**4. LIMIT 10 mostra quantos?**
Resposta: 10 resultados.

**5. Como pedir pro ChatGPT gerar SELECT?**
Resposta: Descrever em portuguÃªs: "Quero X que tem Y, ordenar por Z"

---

## ğŸ“ EXERCÃCIO (10 minutos)

**Sua tarefa:**

VocÃª tem tabela `pedidos` com colunas:
- id, cliente_nome, valor, data_pedido, status

**Escreva queries para:**

1. Todos os pedidos acima de 1000 reais
2. Pedidos em janeiro de 2024, ordenados pelo maior valor
3. Os 5 pedidos mais recentes que ainda tÃ£o "Pendentes"
4. Clientes de SP que compraram mais de 500 reais

(Dica: Se nÃ£o lembrar a sintaxe exata, pede pro ChatGPT!)

---

## ğŸ¯ PRÃ“XIMO PASSO

Na prÃ³xima aula (04.3), vamos:
- âœ… INSERT: Adicionar dados novos
- âœ… Como estruturar pra nÃ£o quebrar
- âœ… RETURNING: Ver o que foi criado

Bora? ğŸš€

---

*Aula criada por JosÃ© Amorim (Professor SocrÃ¡tico)*
*Framework: Espiral Expansiva + Anti-Impostor Design*
*DuraÃ§Ã£o estimada: 12 minutos*
*Fonte: PostgreSQL SELECT Docs | Supabase SQL Editor*
