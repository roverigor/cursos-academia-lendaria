---
lesson_id: "3.3"
title: "Instalando Docker + Traefik"
module: 3
module_name: "Infraestrutura Base"
duration_minutes: 6
format: video_script
status: draft
connection_dre: "Base para todas as ferramentas + HTTPS automático"
learning_objectives:
  - Instalar Docker na VPS
  - Instalar Traefik como proxy reverso
  - Entender o que cada um faz
prerequisites:
  - Aula 3.2 completa (DNS configurado)
  - Conectado na VPS via SSH
---

# AULA 3.3: Instalando Docker + Traefik

## METADADOS DA GRAVAÇÃO

| Item | Valor |
|------|-------|
| Duração alvo | 6 minutos |
| Cenário | Tela compartilhada (terminal SSH) |
| Tom | Técnico, copiar-colar, direto ao ponto |

---

## ROTEIRO COMPLETO

### [CONEXÃO DRE] - 15 segundos

**[INSTRUTOR NA CÂMERA]**

> Agora a gente instala a base de tudo: Docker e Traefik.
>
> Docker roda as ferramentas. Traefik gerencia os acessos e gera HTTPS.
>
> Você só vai copiar e colar. Vamos lá.

---

### [CONECTANDO NA VPS] - 20 segundos

**[TELA: Bitvise/Terminal]**

> Conecta na sua VPS como fizemos antes.
>
> **[CONECTA]**
>
> Terminal aberto, logado como root. Perfeito.

---

### [INSTALANDO DOCKER] - 90 segundos

**[TELA: Terminal]**

> **PASSO 1: Atualizar o sistema**
>
> ```bash
> apt update && apt upgrade -y
> ```
>
> **[COLA E EXECUTA]**
>
> Espera terminar (pode levar 1-2 minutos).
>
> **PASSO 2: Instalar Docker**
>
> ```bash
> curl -fsSL https://get.docker.com | sh
> ```
>
> **[COLA E EXECUTA]**
>
> Esse script oficial instala tudo automaticamente.
>
> **PASSO 3: Verificar instalação**
>
> ```bash
> docker --version
> ```
>
> **[MOSTRA RESULTADO]**
>
> Se aparecer `Docker version 24.x.x` ou similar, funcionou!

---

### [CRIANDO A REDE DO TRAEFIK] - 30 segundos

**[TELA: Terminal]**

> Antes do Traefik, criamos uma rede Docker:
>
> ```bash
> docker network create traefik_proxy
> ```
>
> **[EXECUTA]**
>
> Essa rede conecta todas as ferramentas ao Traefik.

---

### [INSTALANDO TRAEFIK] - 90 segundos

**[TELA: Terminal]**

> Agora o Traefik. Primeiro, cria a pasta:
>
> ```bash
> mkdir -p /opt/traefik && cd /opt/traefik
> ```
>
> **[EXECUTA]**
>
> Cria o arquivo de configuração:
>
> ```bash
> nano docker-compose.yml
> ```
>
> **[ABRE EDITOR]**
>
> Cola esse conteúdo (disponível nos materiais):

```yaml
version: "3.8"

services:
  traefik:
    image: traefik:v2.10
    container_name: traefik
    restart: unless-stopped
    command:
      - "--api.dashboard=true"
      - "--providers.docker=true"
      - "--providers.docker.exposedbydefault=false"
      - "--entrypoints.web.address=:80"
      - "--entrypoints.websecure.address=:443"
      - "--certificatesresolvers.letsencrypt.acme.httpchallenge=true"
      - "--certificatesresolvers.letsencrypt.acme.httpchallenge.entrypoint=web"
      - "--certificatesresolvers.letsencrypt.acme.email=seuemail@exemplo.com"
      - "--certificatesresolvers.letsencrypt.acme.storage=/letsencrypt/acme.json"
      - "--entrypoints.web.http.redirections.entryPoint.to=websecure"
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - "/var/run/docker.sock:/var/run/docker.sock:ro"
      - "./letsencrypt:/letsencrypt"
    networks:
      - traefik_proxy

networks:
  traefik_proxy:
    external: true
```

> **[EXPLICA ENQUANTO COLA]**
>
> Troca `seuemail@exemplo.com` pelo seu email real — é pro certificado SSL.
>
> Salva: `Ctrl+O`, Enter, `Ctrl+X`
>
> **Sobe o Traefik:**
>
> ```bash
> docker compose up -d
> ```
>
> **[EXECUTA]**
>
> Verifica se tá rodando:
>
> ```bash
> docker ps
> ```
>
> **[MOSTRA]**
>
> Se aparecer `traefik` com status `Up`, sucesso!

---

### [CHECKPOINT + PRÓXIMA AÇÃO] - 20 segundos

**[INSTRUTOR NA CÂMERA]**

> **CHECKPOINT:**
>
> - ✅ Docker instalado (`docker --version` funciona)
> - ✅ Rede `traefik_proxy` criada
> - ✅ Traefik rodando (`docker ps` mostra Up)
>
> Agora você tem a base. Na próxima aula: Portainer — o painel visual pra gerenciar tudo.

---

## NOTAS DE PRODUÇÃO

### Elementos visuais:
- Terminal com comandos destacados
- Output dos comandos

### Tom de voz:
- Direto, copiar-colar
- "Espera terminar", "se aparecer isso, funcionou"

### Arquivos necessários:
- docker-compose.yml do Traefik nos materiais de apoio

### Duração real: 6 minutos
