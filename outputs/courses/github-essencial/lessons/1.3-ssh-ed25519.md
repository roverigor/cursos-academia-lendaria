# 1.3 - SSH com Ed25519

**Duração:** 10 min | **Nível:** Iniciante

## Objetivo

Configurar autenticação SSH com algoritmo Ed25519 para conectar com GitHub de forma segura, moderna e sem precisar digitar senha a cada push.

## Por que isso importa

GitHub removeu autenticação por senha em 2021. SSH é o método mais seguro e prático: você configura uma vez e nunca mais se preocupa. Ed25519 é o algoritmo recomendado pela própria GitHub (mais seguro e rápido que RSA antigo).

## Conteúdo

### O Que É SSH?

**SSH (Secure Shell):** Protocolo de comunicação criptografado que usa um par de chaves:
- **Chave privada:** Fica no seu computador (NUNCA compartilhe)
- **Chave pública:** Você adiciona no GitHub

**Analogia:** É como um cadeado (GitHub) e uma chave (seu computador). Só você tem a chave.

### Por Que Ed25519?

| Algoritmo | Tamanho da Chave | Velocidade | Segurança | Status |
|-----------|------------------|------------|-----------|--------|
| RSA | 2048-4096 bits | Lenta | Boa | Antigo |
| Ed25519 | 256 bits | Rápida | Excelente | **Recomendado 2024** |

GitHub recomenda Ed25519 desde 2022. É o padrão moderno.

### Passo 1: Verificar Se Já Tem Chave SSH

```bash
# Ver se existe chave Ed25519
ls -la ~/.ssh/id_ed25519.pub
```

**Se já existir:** Pule para Passo 3 (adicionar no GitHub)

**Se não existir:** Continue no Passo 2

### Passo 2: Gerar Nova Chave Ed25519

```bash
# Substitua pelo SEU email do GitHub
ssh-keygen -t ed25519 -C "seu@email.com"
```

**Perguntas que vão aparecer:**

1. **"Enter file in which to save the key"**
   - Aperte ENTER (aceita padrão: `~/.ssh/id_ed25519`)

2. **"Enter passphrase"**
   - **Opção segura:** Digite uma senha forte
   - **Opção prática:** Deixe vazio (ENTER) se computador é só seu
   - Se escolher senha, vai precisar digitar toda vez

**Saída esperada:**
```
Your identification has been saved in /home/user/.ssh/id_ed25519
Your public key has been saved in /home/user/.ssh/id_ed25519.pub
The key fingerprint is:
SHA256:abc123xyz... seu@email.com
```

### Passo 3: Adicionar Chave ao SSH Agent

O SSH agent guarda sua chave em memória para você não precisar digitar passphrase toda hora.

**macOS/Linux:**
```bash
# Inicia o ssh-agent
eval "$(ssh-agent -s)"

# Adiciona sua chave
ssh-add ~/.ssh/id_ed25519
```

**Windows (Git Bash):**
```bash
# Inicia o ssh-agent
eval `ssh-agent -s`

# Adiciona sua chave
ssh-add ~/.ssh/id_ed25519
```

### Passo 4: Copiar Chave Pública

Você precisa copiar o conteúdo da chave **pública** (não a privada!) para adicionar no GitHub.

**macOS:**
```bash
pbcopy < ~/.ssh/id_ed25519.pub
# Chave copiada para clipboard
```

**Linux:**
```bash
cat ~/.ssh/id_ed25519.pub
# Selecione todo o output e copie (Ctrl+Shift+C)
```

**Windows (Git Bash):**
```bash
cat ~/.ssh/id_ed25519.pub | clip
# Chave copiada para clipboard
```

**Ou simplesmente visualize:**
```bash
cat ~/.ssh/id_ed25519.pub
```

A chave pública parece com isso:
```
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIJl3dIeudNqd... seu@email.com
```

### Passo 5: Adicionar no GitHub

1. **Acesse GitHub:**
   - Vá em [github.com/settings/keys](https://github.com/settings/keys)
   - Ou: Settings → SSH and GPG keys

2. **Clique em "New SSH key"**

3. **Preencha:**
   - **Title:** Nome descritivo (ex: "Notebook Pessoal", "PC Trabalho")
   - **Key type:** Authentication Key
   - **Key:** Cole a chave pública copiada

4. **Clique "Add SSH key"**

5. **Confirme senha** do GitHub se solicitado

### Passo 6: Testar Conexão

```bash
ssh -T git@github.com
```

**Primeira vez:** Pergunta se confia no host
```
The authenticity of host 'github.com' can't be established.
...
Are you sure you want to continue connecting (yes/no)?
```
Digite `yes` e ENTER.

**Saída de sucesso:**
```
Hi SeuUsername! You've successfully authenticated, but GitHub does not provide shell access.
```

**Se deu erro:**
- Verifique se copiou a chave correta (`.pub`)
- Confirme que adicionou no GitHub
- Rode `ssh-add ~/.ssh/id_ed25519` novamente

### Configuração Automática (Opcional)

Para SSH agent iniciar automaticamente:

**macOS** - Crie/edite `~/.ssh/config`:
```bash
Host github.com
  AddKeysToAgent yes
  UseKeychain yes
  IdentityFile ~/.ssh/id_ed25519
```

**Linux** - Adicione ao `~/.bashrc` ou `~/.zshrc`:
```bash
if [ -z "$SSH_AUTH_SOCK" ]; then
   eval `ssh-agent -s`
   ssh-add ~/.ssh/id_ed25519
fi
```

### SSH vs HTTPS: Qual Usar?

| Método | URL Exemplo | Quando Usar |
|--------|-------------|-------------|
| **SSH** | `git@github.com:user/repo.git` | Você tem SSH configurado (recomendado) |
| HTTPS | `https://github.com/user/repo.git` | Computador compartilhado, CI/CD |

**Sempre prefira SSH** se o computador é seu. É mais seguro e prático.

### Clonar Repo com SSH

```bash
# Jeito correto (SSH)
git clone git@github.com:username/repo.git

# Jeito antigo (HTTPS - evite)
git clone https://github.com/username/repo.git
```

### Troubleshooting

**Erro: "Permission denied (publickey)"**
- Chave não foi adicionada no GitHub
- Ou está usando HTTPS em vez de SSH

**Erro: "Could not open a connection to your authentication agent"**
```bash
eval "$(ssh-agent -s)"
ssh-add ~/.ssh/id_ed25519
```

## Exercício Prático

1. **Gere chave Ed25519** com seu email do GitHub
2. **Adicione no SSH agent**
3. **Copie chave pública** e adicione no GitHub
4. **Teste conexão**: `ssh -T git@github.com`
5. **Tire screenshot** da mensagem de sucesso

## Checkpoint

- [ ] Chave Ed25519 gerada (`~/.ssh/id_ed25519`)
- [ ] Chave adicionada ao SSH agent
- [ ] Chave pública no GitHub (Settings → SSH keys)
- [ ] Teste SSH funcionou (mensagem "Hi username!")
- [ ] Entendo diferença entre chave pública e privada

## Próxima lição

Setup completo! Agora vamos criar seu primeiro repositório do jeito profissional, com README, .gitignore e License desde o início. → **2.1 - Criando repo certo**
