# 2.2 - O ciclo básico

**Duração:** 15 min | **Nível:** Iniciante

## Objetivo

Dominar os comandos fundamentais do Git (clone, status, add, commit) e internalizar o workflow mental de versionamento.

## Por que isso importa

Estes 4 comandos representam 80% do seu uso diário do Git. Entender o fluxo entre Working Directory → Staging Area → Repository é a base para tudo que vem depois. É o ciclo que você vai repetir centenas de vezes por semana.

## Conteúdo

### O Modelo Mental do Git

Git trabalha com 3 áreas:

```
┌─────────────────────────────────────────────────────────────┐
│  Working Directory (Diretório de Trabalho)                  │
│  Arquivos que você edita                                    │
│                                                             │
│  index.js (modificado)                                      │
│  README.md (modificado)                                     │
│  new-feature.js (novo)                                      │
└──────────────────┬──────────────────────────────────────────┘
                   │ git add
                   ▼
┌─────────────────────────────────────────────────────────────┐
│  Staging Area (Área de Preparação)                          │
│  Arquivos marcados para próximo commit                      │
│                                                             │
│  index.js ✓                                                 │
│  new-feature.js ✓                                           │
└──────────────────┬──────────────────────────────────────────┘
                   │ git commit
                   ▼
┌─────────────────────────────────────────────────────────────┐
│  Repository (Repositório Local)                             │
│  Histórico de versões salvas                                │
│                                                             │
│  Commit abc123: "Add new feature"                           │
│  Commit def456: "Update README"                             │
└─────────────────────────────────────────────────────────────┘
```

**Analogia:**
- **Working Directory** = Rascunho
- **Staging Area** = Envelope pronto para selar
- **Repository** = Carta enviada (permanente)

### Comando 1: git clone

**O que faz:** Copia repositório remoto (GitHub) para seu computador.

```bash
# Clone via SSH (recomendado)
git clone git@github.com:username/repo.git

# Clone via HTTPS (se SSH não configurado)
git clone https://github.com/username/repo.git

# Clone para diretório específico
git clone git@github.com:username/repo.git meu-projeto
```

**O que acontece:**
1. Cria pasta com nome do repo
2. Baixa todo histórico de commits
3. Cria conexão automática com GitHub (remote "origin")
4. Faz checkout da branch principal (main)

**Exemplo prático:**
```bash
git clone git@github.com:facebook/react.git
cd react
ls -la  # Você tem todo o código do React localmente
```

**Você só clona uma vez por projeto.** Depois usa `git pull` para atualizar.

### Comando 2: git status

**O que faz:** Mostra situação atual do repositório.

```bash
git status
```

**Saída típica:**
```
On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        modified:   index.js

Untracked files:
  (use "git add <file>..." to include in what will be committed)
        new-feature.js

no changes added to commit (use "git add" and/or "git commit -a")
```

**Traduzindo:**
- `modified: index.js` → Arquivo rastreado que foi modificado
- `Untracked files: new-feature.js` → Arquivo novo que Git não conhece
- `no changes added to commit` → Staging area está vazia

**Use sempre:** Antes de add, antes de commit, quando estiver perdido.

**Versão curta:**
```bash
git status -s  # Short format
```

Saída:
```
 M index.js      # Modified
?? new-feature.js  # Untracked
```

### Comando 3: git add

**O que faz:** Move arquivos para Staging Area (prepara para commit).

#### Adicionar arquivo específico
```bash
git add index.js
```

#### Adicionar múltiplos arquivos
```bash
git add index.js new-feature.js README.md
```

#### Adicionar todos os arquivos modificados e novos
```bash
git add .
# Ou
git add --all
# Ou
git add -A
```

**Diferença importante:**
```bash
# Adiciona tudo no diretório atual e subdiretórios
git add .

# Adiciona tudo no repositório (mesmo fora do diretório atual)
git add --all
```

**Regra prática:** Use `git add .` sempre no root do projeto.

#### Adicionar interativamente (avançado)
```bash
git add -p  # Escolhe quais mudanças adicionar linha por linha
```

**Depois de add:**
```bash
git status
```

Saída:
```
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
        modified:   index.js
        new file:   new-feature.js
```

### Comando 4: git commit

**O que faz:** Salva snapshot dos arquivos em Staging Area no histórico do repositório.

#### Commit com mensagem inline
```bash
git commit -m "Add user authentication feature"
```

**Regras de mensagem:**
- Use imperativo: "Add", "Fix", "Update" (não "Added", "Fixed")
- Seja específico: "Fix login button alignment" > "Fix bug"
- Máximo 50 caracteres no título
- Em inglês (padrão da indústria)

#### Commit com mensagem detalhada
```bash
git commit
```

Abre editor configurado (VS Code, Nano, Vim). Estrutura:

```
Título curto (50 chars)

Parágrafo explicando o que mudou e por quê.
Use quantas linhas precisar.

- Lista de mudanças
- Outra mudança importante
```

#### Atalho: Add + Commit em um comando
```bash
# ATENÇÃO: Só funciona para arquivos já rastreados (não pega novos)
git commit -am "Update README"
```

Equivalente a:
```bash
git add -u  # Adiciona só arquivos já rastreados
git commit -m "Update README"
```

**Quando usar:**
- Mudanças pequenas em arquivos existentes
- Você tem certeza do que está commitando

**Quando NÃO usar:**
- Arquivos novos (não serão incluídos)
- Você quer revisar mudanças primeiro

### O Ciclo Completo na Prática

**Cenário:** Você vai adicionar uma nova feature.

```bash
# 1. Verifique estado atual
git status

# 2. Crie/edite arquivos no seu editor
# (crie arquivo features/login.js)

# 3. Veja o que mudou
git status

# Saída:
# Untracked files:
#   features/login.js

# 4. Adicione à staging area
git add features/login.js

# 5. Confirme o que vai ser commitado
git status

# Saída:
# Changes to be committed:
#   new file:   features/login.js

# 6. Salve no histórico
git commit -m "Add login feature"

# Saída:
# [main abc1234] Add login feature
#  1 file changed, 25 insertions(+)
#  create mode 100644 features/login.js

# 7. Confirme que está limpo
git status

# Saída:
# On branch main
# nothing to commit, working tree clean
```

### Ver Histórico de Commits

```bash
# Histórico completo
git log

# Histórico compacto (mais útil)
git log --oneline

# Últimos 5 commits
git log --oneline -5

# Com gráfico de branches
git log --oneline --graph --all
```

Saída de `git log --oneline`:
```
abc1234 Add login feature
def5678 Update README
ghi9012 Initial commit
```

### Comandos de Verificação Úteis

```bash
# Ver diferenças antes de adicionar
git diff

# Ver diferenças do que já está em staging
git diff --staged

# Ver último commit
git show

# Ver commit específico
git show abc1234
```

### Workflow Mental - Resumo

1. **Clone** (uma vez só)
2. **Loop infinito:**
   - Edite arquivos
   - `git status` (veja o que mudou)
   - `git add .` (marque para salvar)
   - `git status` (confirme)
   - `git commit -m "mensagem"` (salve versão)
   - `git status` (working tree clean ✓)

**Este é o ciclo que você vai repetir dezenas de vezes por dia.**

### Erros Comuns

**❌ Commit sem add:**
```bash
# Editou index.js
git commit -m "Update index"
# Erro: nada commitado (esqueceu o add)
```

**✅ Jeito correto:**
```bash
git add index.js
git commit -m "Update index"
```

**❌ Esquecer mensagem de commit:**
```bash
git commit
# Abre editor vazio, você fecha sem escrever nada
# Commit abortado
```

**❌ Mensagem genérica:**
```bash
git commit -m "changes"  # Não diz NADA
```

**✅ Mensagem específica:**
```bash
git commit -m "Fix navbar responsive layout on mobile"
```

## Exercício Prático

Use o repo `github-practice-repo` que você criou:

```bash
cd github-practice-repo

# 1. Verifique status
git status

# 2. Crie arquivo novo
echo "console.log('Hello Git');" > index.js

# 3. Veja status (arquivo untracked)
git status

# 4. Adicione
git add index.js

# 5. Veja status (changes to be committed)
git status

# 6. Commit
git commit -m "Add initial JavaScript file"

# 7. Veja histórico
git log --oneline

# 8. Edite index.js (adicione mais uma linha)
echo "console.log('Learning Git');" >> index.js

# 9. Veja diferença
git diff

# 10. Add + commit
git add index.js
git commit -m "Add learning message to index"

# 11. Veja histórico final
git log --oneline
```

## Checkpoint

- [ ] Entendo as 3 áreas: Working Directory, Staging, Repository
- [ ] Sei usar `git status` para ver situação atual
- [ ] Uso `git add` para preparar arquivos
- [ ] Uso `git commit` para salvar versões
- [ ] Escrevo mensagens de commit claras e específicas
- [ ] Sei ver histórico com `git log --oneline`

## Próxima lição

Você sabe salvar versões localmente! Agora vamos sincronizar com GitHub usando push e pull. → **2.3 - Push e Pull**
