# Aula 2.14: Follow-up Inteligente (Timing + Context)

**M√≥dulo:** 2 - AI Sales Machine
**N√≠vel:** 2
**Dura√ß√£o:** 15 min

---

## üéØ Objetivos

1. Follow-up baseado em comportamento (n√£o tempo fixo)
2. GPT-4 determina pr√≥ximo follow-up
3. Contextualizar baseado em a√ß√µes anteriores
4. Aumentar reply rate em follow-ups (3% ‚Üí 10%)

---

## üìä Triggers de Follow-up

### Behavior-Based (vs Time-Based)

**Ruim (Time-Based):**
```
Day 2: Follow-up #1
Day 5: Follow-up #2
Day 9: Follow-up #3
```

**Bom (Behavior-Based):**
```
Lead abriu email 3x mas n√£o respondeu ‚Üí Enviar caso de uso espec√≠fico
Lead clicou no link mas n√£o agendou ‚Üí Enviar FAQ
Lead abriu email mas n√£o clicou ‚Üí Mudar CTA (email ‚Üí calendly)
```

---

## ü§ñ GPT-4: Determine Next Action

### Prompt

```
Analyze lead behavior and determine best next follow-up action.

LEAD BEHAVIOR:
- Emails sent: {{ touch_count }}
- Emails opened: {{ email_opens }}
- Links clicked: {{ link_clicks }}
- Last opened: {{ hours_since_last_open }}h ago
- Replied: {{ replied }}
- Current stage: {{ stage }}

CONTEXT:
- Industry: {{ industry }}
- Lead score: {{ lead_score }}
- Similar companies contacted: {{ similar_companies }}

DECISION:
What should be the next follow-up?

OPTIONS:
1. "send_case_study" - High engagement, needs proof
2. "send_faq" - Clicked but didn't book, has objections
3. "breakup_email" - Low engagement, last attempt
4. "wait_7_days" - Some engagement, give space
5. "escalate_to_human" - Hot lead, needs personal touch
6. "stop_sequence" - Zero engagement, disqualify

OUTPUT (JSON):
{
  "action": "send_case_study",
  "reasoning": "Opened 3x, high engagement, needs social proof",
  "suggested_subject": "Como {{ similar_company }} aumentou vendas 800%",
  "wait_hours": 48
}
```

---

## üìß Follow-up Templates Contextuais

### Template 1: High Engagement, No Reply

```
{{ first_name }},

Vi que voc√™ abriu meu email algumas vezes - significa que tem interesse?

Se sim, te mando case completo de {{ similar_company }}:
‚Üí Problema: {{ pain_point }}
‚Üí Solu√ß√£o: AI Sales Machine
‚Üí Resultado: +800% vendas, R$ 58k/m√™s

15 min pra mostrar: [Calendly]

Se n√£o for o momento, me avisa.

Abs,
{{ sender }}
```

### Template 2: Clicked Link, Didn't Book

```
{{ first_name }},

Vi que voc√™ clicou no link mas n√£o agendou.

Alguma d√∫vida que eu posso esclarecer antes?

Common FAQs:
- Pre√ßo: R$ 5k/m√™s (ROI: R$ 58k)
- Tempo setup: 7 dias
- Suporte: Inclu√≠do

Ou prefere que eu te ligue? Qual melhor dia/hora?

Abs,
{{ sender }}
```

### Template 3: Zero Engagement (Breakup)

```
{{ first_name }},

Mandei 3 emails mas n√£o recebi resposta.

Assumo que:
[ ] N√£o √© prioridade agora
[ ] J√° tem solu√ß√£o
[ ] Inbox lotado

Esse √© meu √∫ltimo email.

Se quiser retomar no futuro, √© s√≥ responder.

Abs,
{{ sender }}
```

---

## ‚è±Ô∏è Timing Otimizado

### Wait Time por Engagement Level

```javascript
const calculateWaitTime = (lead) => {
    // High engagement = wait less
    if (lead.email_opens >= 3) return 24; // hours

    // Medium engagement = wait moderate
    if (lead.email_opens >= 1) return 48;

    // Low engagement = wait longer
    return 72;
};
```

---

## üîß n8n Implementation

```json
{
  "name": "GPT-4 Determine Next Action",
  "type": "@n8n/n8n-nodes-langchain.openAi",
  "parameters": {
    "model": "gpt-4",
    "prompt": "[PROMPT ACIMA]"
  }
},
{
  "name": "Switch by Action",
  "type": "n8n-nodes-base.switch",
  "parameters": {
    "mode": "expression",
    "rules": [
      { "value1": "={{ $json.action }}", "value2": "send_case_study", "output": 0 },
      { "value1": "={{ $json.action }}", "value2": "send_faq", "output": 1 },
      { "value1": "={{ $json.action }}", "value2": "breakup_email", "output": 2 },
      { "value1": "={{ $json.action }}", "value2": "escalate_to_human", "output": 3 }
    ]
  }
}
```

---

## ‚úÖ Checklist

- [ ] GPT-4 next action determiner configurado
- [ ] 3 templates contextuais (high/medium/low engagement)
- [ ] Wait time din√¢mico baseado em opens
- [ ] Breakup email ap√≥s 3 toques sem resposta

---

**üéì Conceito:** Follow-up baseado em comportamento (abriu 3x) > tempo fixo (dia 5). Use GPT-4 para decidir pr√≥xima a√ß√£o.
