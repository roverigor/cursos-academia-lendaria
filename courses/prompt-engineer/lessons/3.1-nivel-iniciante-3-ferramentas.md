# Lesson 3.1: N√≠vel Iniciante - 3 Ferramentas Google

**M√≥dulo:** 3 - OS 3 N√çVEIS DE COMPLEXIDADE
**Dura√ß√£o:** 20 minutos (+ 30-40 min de pr√°tica)
**Tipo:** Hands-on (laborat√≥rio pr√°tico)
**N√≠vel:** Fundamento 1 - Iniciante

---

## üéØ O QUE VOC√ä VAI CONSTRUIR

Olha s√≥...

At√© agora voc√™ aprendeu TEORIA:
- Como escolher modelo certo (M√≥dulo 1)
- Como arquitetar prompts profissionais (M√≥dulo 2)

**Agora voc√™ vai CONSTRUIR.**

Nesta lesson, voc√™ vai criar seu primeiro agente FUNCIONAL de verdade.

**Agente de Agendamento - N√≠vel Iniciante**
- 3 ferramentas Google (Gmail + Calendar Get + Calendar Create)
- Workflow simples mas COMPLETO
- Testado com 5 cen√°rios reais
- Pronto pra mostrar pro cliente

**No final:** Voc√™ tem agente funcionando em produ√ß√£o. De verdade.

---

## üî• PROBLEMA REAL QUE VOC√ä VAI RESOLVER

**Cliente:** Consultoria pequena (3 s√≥cios)

**Situa√ß√£o atual:**
- Clientes preenchem formul√°rio no site pedindo reuni√£o
- S√≥cio recebe email
- S√≥cio MANUALMENTE:
  1. Verifica agenda no Google Calendar
  2. Identifica 3 hor√°rios livres
  3. Responde email oferecendo hor√°rios
  4. Cliente escolhe
  5. S√≥cio cria evento no Calendar
  6. S√≥cio envia confirma√ß√£o

**Tempo gasto:** 8-12 minutos POR solicita√ß√£o
**Volume:** 15-20 solicita√ß√µes/semana
**Total desperdi√ßado:** 3-4 horas/semana

---

**Cliente quer:**
> "Automatizar isso. Quando algu√©m pedir reuni√£o, sistema verifica agenda, oferece hor√°rios, e agenda automaticamente quando cliente confirmar."

**Voc√™ vai entregar:** Agente que faz isso SOZINHO.

---

## üí° FUNDAMENTO: POR QUE COME√áAR COM 3 FERRAMENTAS?

Vem comigo...

**Por que n√£o come√ßar com 10 ferramentas logo?**

Porque construir agente √© como aprender a dirigir:

- ‚ùå Voc√™ N√ÉO aprende a dirigir pegando um caminh√£o de 18 marchas
- ‚úÖ Voc√™ aprende com carro SIMPLES (c√¢mbio autom√°tico, estacionamento f√°cil)

---

**N√≠vel Iniciante (3 ferramentas) = Carro autom√°tico**
- Arquitetura SIMPLES (f√°cil de debugar)
- Poucas coisas podem quebrar
- Voc√™ entende CADA passo do workflow
- Confian√ßa pra escalar depois

**Se voc√™ pular direto pra 10 ferramentas:**
- üî• Quebra e voc√™ n√£o sabe ONDE quebrou
- üî• Debugar vira pesadelo (qual ferramenta falhou?)
- üî• Cliente v√™ sistema inst√°vel
- üî• Voc√™ desiste antes de dominar

**Simples assim.**

---

## üõ†Ô∏è SETUP INICIAL (5 min)

### Ferramentas que voc√™ vai precisar:

**1. n8n Cloud** (orquestra√ß√£o do workflow)
- Crie conta gratuita: https://n8n.io
- Plano Starter: Gratuito por 14 dias, depois $20/m√™s
- J√° inclui todas integra√ß√µes Google

**2. Google Workspace** (ou conta Google pessoal)
- Gmail ativo
- Google Calendar configurado

**3. OpenRouter** (acesso aos LLMs)
- Conta criada (voc√™ j√° fez no M√≥dulo 1)
- API key configurada
- Cr√©dito: $5 inicial

---

**Checklist de prepara√ß√£o:**

- [ ] n8n account criada e logada
- [ ] Google account conectado no n8n (OAuth)
- [ ] OpenRouter API key salva
- [ ] Abriu editor de texto (pra escrever o prompt)

**Pronto? Vamos construir.**

---

## üèóÔ∏è CONSTRU√á√ÉO PASSO A PASSO

### PASSO 1: Definir as 3 Ferramentas

**Ferramenta 1: Gmail - Send Email**
- **O que faz:** Envia email pro cliente
- **Quando usar:** Oferecer hor√°rios dispon√≠veis

**Ferramenta 2: Google Calendar - Get Events**
- **O que faz:** Lista eventos de um dia espec√≠fico
- **Quando usar:** Verificar quais hor√°rios est√£o ocupados

**Ferramenta 3: Google Calendar - Create Event**
- **O que faz:** Cria novo evento na agenda
- **Quando usar:** Cliente confirmou hor√°rio

---

### PASSO 2: Mapear o Workflow (antes de escrever c√≥digo)

```
TRIGGER: Formul√°rio preenchido no site
    ‚Üì
[Dados recebidos: nome, email, assunto, prefer√™ncia de data]
    ‚Üì
ETAPA 1: Verificar agenda
- Executar Google Calendar Get Events (pr√≥ximos 5 dias √∫teis)
- Identificar blocos LIVRES (1 hora)
    ‚Üì
ETAPA 2: Oferecer hor√°rios
- Selecionar 3 melhores op√ß√µes
- Enviar email via Gmail com hor√°rios
    ‚Üì
ETAPA 3: Aguardar confirma√ß√£o cliente
- Cliente responde email escolhendo hor√°rio
    ‚Üì
ETAPA 4: Criar evento
- Executar Google Calendar Create Event
- Enviar confirma√ß√£o via Gmail
    ‚Üì
FIM
```

**Observa√ß√£o cr√≠tica:**

Este workflow √© STATEFUL (precisa lembrar da conversa).

Estrat√©gias:
1. **Op√ß√£o A (Simples):** Cliente responde email, voc√™ processa manualmente ETAPA 4
2. **Op√ß√£o B (Avan√ßado):** Usar webhook + n8n pra detectar resposta e executar ETAPA 4 automaticamente

**Nesta lesson:** Vamos fazer Op√ß√£o A (mais did√°tico).

---

### PASSO 3: Escrever o Prompt (Geod√©sia Aplicada)

**Arquitetura:**

```markdown
# AGENTE: ASSISTENTE DE AGENDAMENTO - N√çVEL 1
# Ferramentas: 3 (Gmail + Calendar Get + Calendar Create)
# Vers√£o: 1.0

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
## POLIEDRO 1 - IDENTIDADE
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Voc√™ √© assistente de agendamento da [Nome da Empresa].

**Contexto de opera√ß√£o:**
- Trigger: Formul√°rio do site foi preenchido
- Dados recebidos: {nome_cliente}, {email_cliente}, {assunto}, {data_preferencial}
- Canal de resposta: Email

**Seu papel:**
- Verificar disponibilidade na agenda
- Sugerir 3 hor√°rios livres
- Agendar reuni√£o ap√≥s confirma√ß√£o do cliente

**Seu tom:**
- Profissional mas acess√≠vel
- Objetivo (sem enrola√ß√£o)
- Educado

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
## POLIEDRO 2 - FERRAMENTAS
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

**1. google_calendar_get_events(date_start, date_end)**
- Retorna lista de eventos entre duas datas
- Output: JSON com [{"start": "2025-10-20T10:00", "end": "2025-10-20T11:00", "title": "Reuni√£o X"}]
- Use para: Identificar hor√°rios OCUPADOS

**2. gmail_send(to, subject, body)**
- Envia email
- Input: Destinat√°rio, assunto, corpo do email
- Use para: Oferecer hor√°rios ao cliente

**3. google_calendar_create_event(title, start, end, attendee_email)**
- Cria evento no calend√°rio
- Input: T√≠tulo, data/hora in√≠cio, data/hora fim, email do participante
- Output: ID do evento criado
- Use para: Agendar reuni√£o AP√ìS cliente confirmar

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
## POLIEDRO 3 - WORKFLOW
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

**ETAPA 1: Analisar Solicita√ß√£o**

1. Verificar se dados obrigat√≥rios est√£o presentes:
   - ‚úì {nome_cliente}
   - ‚úì {email_cliente}
   - ‚úì {assunto}
   - ‚úì {data_preferencial} (se n√£o tiver, usar "pr√≥ximos 5 dias √∫teis")

2. Definir janela de busca:
   - SE {data_preferencial} existe ‚Üí buscar naquele dia + pr√≥ximos 2 dias
   - SE n√£o existe ‚Üí buscar pr√≥ximos 5 dias √∫teis (Seg-Sex)

---

**ETAPA 2: Verificar Disponibilidade**

1. Executar google_calendar_get_events(date_start={hoje}, date_end={hoje+5dias})

2. Processar resposta:
   - Listar todos eventos retornados
   - Identificar BLOCOS LIVRES de 1 hora
   - Hor√°rio comercial: 9h-18h (excluir 12h-14h = almo√ßo)

3. Selecionar 3 melhores hor√°rios:
   - Prioridade 1: Data preferencial do cliente (se tiver)
   - Prioridade 2: Manh√£ (9h-12h)
   - Prioridade 3: Tarde (14h-18h)
   - Distribuir em dias diferentes (n√£o oferecer 3 hor√°rios do mesmo dia)

---

**ETAPA 3: Enviar Proposta de Hor√°rios**

1. Formatar email:

**Assunto:** "Agendamento de Reuni√£o - {assunto}"

**Corpo:**
```
Ol√° {nome_cliente},

Recebi sua solicita√ß√£o de reuni√£o sobre "{assunto}".

Tenho os seguintes hor√°rios dispon√≠veis:

1. {dia_semana_1}, {data_1} √†s {hora_1}
2. {dia_semana_2}, {data_2} √†s {hora_2}
3. {dia_semana_3}, {data_3} √†s {hora_3}

Dura√ß√£o: 1 hora

Qual desses hor√°rios funciona melhor pra voc√™? Basta responder este email com o n√∫mero da op√ß√£o (1, 2 ou 3).

Abra√ßo,
[Nome da Empresa]
```

2. Executar gmail_send(to={email_cliente}, subject={assunto}, body={email_formatado})

---

**ETAPA 4: Criar Evento (executada AP√ìS cliente responder)**

‚ö†Ô∏è IMPORTANTE: Esta etapa s√≥ roda quando cliente confirmar hor√°rio

1. Cliente responde email escolhendo op√ß√£o (ex: "Op√ß√£o 2")

2. Identificar hor√°rio escolhido

3. Executar google_calendar_create_event(
   title="Reuni√£o: {assunto} - {nome_cliente}",
   start={data_hora_escolhida},
   end={data_hora_escolhida + 1h},
   attendee_email={email_cliente}
)

4. Enviar confirma√ß√£o via gmail_send:

**Assunto:** "Reuni√£o Confirmada - {assunto}"

**Corpo:**
```
Ol√° {nome_cliente},

Reuni√£o confirmada!

üìÖ Data: {dia_semana}, {data}
üïê Hor√°rio: {hora_inicio} √†s {hora_fim}
üìç Local: [Link Google Meet ou endere√ßo]

Voc√™ receber√° convite do Google Calendar no email {email_cliente}.

At√© l√°!
[Nome da Empresa]
```

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
## POLIEDRO 4 - ERROS
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

**SE google_calendar_get_events() falhar:**
‚Üí Tentar 1x novamente (pode ser timeout)
‚Üí Se falhar de novo:
  - Enviar email: "Tive dificuldade t√©cnica pra acessar a agenda. Nossa equipe vai te retornar em at√© 2 horas com hor√°rios dispon√≠veis."
  - Criar ticket interno pra humano resolver

**SE n√£o encontrar NENHUM hor√°rio livre nos pr√≥ximos 5 dias:**
‚Üí Enviar email: "Nossa agenda est√° cheia nos pr√≥ximos dias. Posso te oferecer hor√°rios na semana seguinte (a partir de {data})?"

**SE email_cliente estiver inv√°lido (sem @):**
‚Üí Criar ticket interno: "Email inv√°lido recebido no formul√°rio: {email_cliente}"
‚Üí N√ÉO tentar enviar (vai falhar)

**SE cliente demorar >48h pra responder:**
‚Üí N√ÉO enviar follow-up autom√°tico
‚Üí Aguardar cliente retomar contato

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
## POLIEDRO 5 - OUTPUT
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

**Formato de email:**
- Assunto: Claro e descritivo
- Corpo: M√°ximo 150 palavras
- Tom: Profissional mas amig√°vel (usar "voc√™", evitar "senhor/senhora")
- Estrutura:
  1. Sauda√ß√£o
  2. Confirma√ß√£o do pedido
  3. Proposta de hor√°rios (bullet points)
  4. Call-to-action claro
  5. Despedida

**Formato de hor√°rios:**
- Dia da semana por extenso: "Segunda-feira"
- Data: DD/MM/YYYY (padr√£o BR)
- Hora: HH:MM (ex: "14:00", n√£o "2pm")

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
## POLIEDRO 6 - RESTRI√á√ïES
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚õî NUNCA sugira hor√°rios entre 12h-14h (almo√ßo)
‚õî NUNCA sugira hor√°rios fora de 9h-18h (hor√°rio comercial)
‚õî NUNCA sugira s√°bado/domingo (a menos que explicitamente configurado)
‚õî NUNCA crie evento SEM confirma√ß√£o expl√≠cita do cliente
‚õî NUNCA ofere√ßa mais de 3 hor√°rios (paralisa decis√£o do cliente)
‚õî NUNCA cancele/modifique eventos existentes (apenas crie novos)

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
```

---

### PASSO 4: Configurar Workflow no n8n

**Estrutura do workflow:**

```
[1] WEBHOOK (recebe dados do formul√°rio)
     ‚Üì
[2] SET NODE (organiza vari√°veis)
     ‚Üì
[3] GOOGLE CALENDAR - Get Events
     ‚Üì
[4] CODE NODE (processa eventos, identifica hor√°rios livres)
     ‚Üì
[5] AI AGENT (LLM com prompt acima)
     ‚Üì
[6] GMAIL - Send Email
```

---

**Node por node:**

**[1] Webhook Trigger**
- URL: https://seu-n8n.app.n8n.cloud/webhook/agendamento
- M√©todo: POST
- Campos esperados: nome, email, assunto, data_preferencial

**[2] Set Node**
```javascript
{
  "nome_cliente": "{{$json.nome}}",
  "email_cliente": "{{$json.email}}",
  "assunto": "{{$json.assunto}}",
  "data_preferencial": "{{$json.data_preferencial || 'pr√≥ximos 5 dias'}}",
  "date_start": "{{$now.format('YYYY-MM-DD')}}",
  "date_end": "{{$now.plus({days: 5}).format('YYYY-MM-DD')}}"
}
```

**[3] Google Calendar - Get Events**
- Calendar: [Selecionar seu calend√°rio]
- Start Time: {{$json.date_start}}
- End Time: {{$json.date_end}}
- Output: All events

**[4] Code Node - Processar Hor√°rios**
```javascript
// Processar eventos e encontrar hor√°rios livres
const events = $input.all()[0].json.items || [];
const horarios_ocupados = events.map(e => ({
  start: new Date(e.start.dateTime),
  end: new Date(e.end.dateTime)
}));

// Gerar slots de 9h-18h (exceto 12h-14h) nos pr√≥ximos 5 dias
const slots_livres = [];
for (let dia = 0; dia < 5; dia++) {
  const data = new Date();
  data.setDate(data.getDate() + dia);

  // Pular fins de semana
  if (data.getDay() === 0 || data.getDay() === 6) continue;

  // Slots manh√£ (9h-12h)
  for (let hora = 9; hora < 12; hora++) {
    const slot_start = new Date(data.setHours(hora, 0, 0));
    const slot_end = new Date(data.setHours(hora + 1, 0, 0));

    // Verificar se est√° livre
    const ocupado = horarios_ocupados.some(evento =>
      slot_start < evento.end && slot_end > evento.start
    );

    if (!ocupado) {
      slots_livres.push({
        start: slot_start.toISOString(),
        end: slot_end.toISOString(),
        label: `${slot_start.toLocaleDateString('pt-BR', {weekday: 'long'})} ${slot_start.toLocaleDateString('pt-BR')} √†s ${hora}:00`
      });
    }
  }

  // Slots tarde (14h-18h)
  for (let hora = 14; hora < 18; hora++) {
    const slot_start = new Date(data.setHours(hora, 0, 0));
    const slot_end = new Date(data.setHours(hora + 1, 0, 0));

    const ocupado = horarios_ocupados.some(evento =>
      slot_start < evento.end && slot_end > evento.start
    );

    if (!ocupado) {
      slots_livres.push({
        start: slot_start.toISOString(),
        end: slot_end.toISOString(),
        label: `${slot_start.toLocaleDateString('pt-BR', {weekday: 'long'})} ${slot_start.toLocaleDateString('pt-BR')} √†s ${hora}:00`
      });
    }
  }
}

// Selecionar 3 primeiros hor√°rios livres
const top_3 = slots_livres.slice(0, 3);

return {
  horarios_disponiveis: top_3,
  total_slots: slots_livres.length
};
```

**[5] AI Agent (OpenRouter)**
- Model: `google/gemini-2.0-flash` (barato e r√°pido)
- Temperature: 0.2 (precis√£o)
- Prompt: [Cole o prompt completo do PASSO 3]
- Variables:
  - nome_cliente: {{$node["Set"].json.nome_cliente}}
  - email_cliente: {{$node["Set"].json.email_cliente}}
  - assunto: {{$node["Set"].json.assunto}}
  - horarios: {{$node["Code"].json.horarios_disponiveis}}

**[6] Gmail - Send Email**
- To: {{$node["Set"].json.email_cliente}}
- Subject: "Agendamento de Reuni√£o - {{$node["Set"].json.assunto}}"
- Body: {{$node["AI Agent"].json.output}}

---

## üß™ OS 5 TESTES PR√ÅTICOS

**Agora voc√™ vai TESTAR o agente com 5 cen√°rios reais.**

### TESTE 1: Email Simples ‚úÖ

**Input (via webhook):**
```json
{
  "nome": "Jo√£o Silva",
  "email": "joao@email.com",
  "assunto": "Consultoria estrat√©gica",
  "data_preferencial": ""
}
```

**Resultado esperado:**
- ‚úÖ Sistema verifica agenda
- ‚úÖ Encontra 3 hor√°rios livres nos pr√≥ximos 5 dias
- ‚úÖ Envia email formatado com 3 op√ß√µes
- ‚úÖ Email recebido em <30 segundos

**Crit√©rio de sucesso:** Email enviado com 3 hor√°rios v√°lidos (n√£o ocupados)

---

### TESTE 2: Data Preferencial ‚úÖ

**Input:**
```json
{
  "nome": "Maria Costa",
  "email": "maria@email.com",
  "assunto": "Reuni√£o comercial",
  "data_preferencial": "2025-10-25"
}
```

**Resultado esperado:**
- ‚úÖ Sistema prioriza dia 25/10 nas op√ß√µes
- ‚úÖ Se 25/10 tiver hor√°rio livre, aparecer como Op√ß√£o 1
- ‚úÖ Outras 2 op√ß√µes em datas pr√≥ximas

**Crit√©rio de sucesso:** Pelo menos 1 hor√°rio sugerido √© do dia 25/10

---

### TESTE 3: Agenda Cheia no Dia Solicitado ‚ö†Ô∏è

**Input:**
```json
{
  "nome": "Carlos Souza",
  "email": "carlos@email.com",
  "assunto": "Diagn√≥stico t√©cnico",
  "data_preferencial": "2025-10-21"
}
```

**Pr√©-condi√ß√£o:** Bloqueie a agenda do dia 21/10 completa (9h-18h)

**Resultado esperado:**
- ‚úÖ Sistema identifica que dia 21 est√° cheio
- ‚úÖ Oferece 3 hor√°rios em OUTROS dias
- ‚úÖ Email explica: "Dia 21/10 est√° cheio, mas tenho estas op√ß√µes:"

**Crit√©rio de sucesso:** Nenhum hor√°rio sugerido √© do dia 21

---

### TESTE 4: Email Inv√°lido ‚ùå

**Input:**
```json
{
  "nome": "Ana Paula",
  "email": "anapaulacom",
  "assunto": "Consultoria",
  "data_preferencial": ""
}
```

**Resultado esperado:**
- ‚úÖ Sistema detecta email inv√°lido (sem @)
- ‚úÖ N√ÉO tenta enviar email
- ‚úÖ Cria alerta interno ou log de erro
- ‚úÖ (Opcional) Envia notifica√ß√£o pro admin

**Crit√©rio de sucesso:** Workflow n√£o quebra, erro tratado gracefully

---

### TESTE 5: Agenda Completamente Vazia üìÖ

**Input:**
```json
{
  "nome": "Pedro Alves",
  "email": "pedro@email.com",
  "assunto": "Planejamento 2026",
  "data_preferencial": ""
}
```

**Pr√©-condi√ß√£o:** Limpe TODA a agenda (pr√≥ximos 5 dias sem nenhum evento)

**Resultado esperado:**
- ‚úÖ Sistema identifica MUITOS hor√°rios livres
- ‚úÖ Seleciona 3 melhores (manh√£, distribu√≠dos em dias diferentes)
- ‚úÖ Oferece hor√°rios: 9h (dia 1), 10h (dia 2), 14h (dia 3)

**Crit√©rio de sucesso:** 3 hor√°rios sugeridos em dias DIFERENTES (n√£o 3 do mesmo dia)

---

## ‚úÖ CHECKLIST DE VALIDA√á√ÉO

Antes de considerar N√≠vel 1 completo, confirme:

**Funcionalidade:**
- [ ] Workflow roda sem erros
- [ ] Email √© enviado em <30s ap√≥s trigger
- [ ] Hor√°rios sugeridos est√£o REALMENTE livres na agenda
- [ ] Formato do email est√° profissional

**Arquitetura Geod√©sica:**
- [ ] Prompt tem os 6 Poliedros mapeados
- [ ] Poliedro 2 (Ferramentas) lista exatamente 3 tools
- [ ] Poliedro 3 (Workflow) tem 4 etapas claras
- [ ] Poliedro 6 (Restri√ß√µes) bloqueia hor√°rios inv√°lidos

**Testes:**
- [ ] Passou nos 5 testes pr√°ticos
- [ ] Tratou erro de email inv√°lido
- [ ] N√£o sugeriu hor√°rios ocupados
- [ ] N√£o sugeriu s√°bado/domingo

---

## üéØ ENTREG√ÅVEL DESTA LESSON

**1. Workflow n8n funcional**
- Exportar workflow: Settings ‚Üí Download
- Salvar como: `nivel-1-agendamento.json`

**2. Prompt comentado**
- Salvar prompt completo com os 6 Poliedros
- Arquivo: `entregas/3.1-prompt-nivel-1.md`

**3. Relat√≥rio de testes**
```markdown
# Testes - Agente N√≠vel 1

## Teste 1: Email Simples
- Status: ‚úÖ PASSOU
- Observa√ß√µes: [...]

## Teste 2: Data Preferencial
- Status: ‚úÖ PASSOU
- Observa√ß√µes: [...]

[...continuar para os 5 testes]

## M√©tricas
- Taxa de sucesso: __/5 (___%)
- Tempo m√©dio de execu√ß√£o: ___s
- Custo por execu√ß√£o: R$ ___
```

---

## üß© EXPANS√ÉO FILOS√ìFICA

E talvez ‚Äî s√≥ talvez ‚Äî voc√™ percebeu uma coisa...

**Voc√™ n√£o construiu "um chatbot".**

**Voc√™ construiu SISTEMA DE PRODU√á√ÉO.**

---

Sistema que:
- ‚úÖ Acessa APIs reais (Google Calendar, Gmail)
- ‚úÖ Toma decis√µes sozinho (quais hor√°rios oferecer)
- ‚úÖ Lida com erros (email inv√°lido, agenda cheia)
- ‚úÖ Funciona SEM supervis√£o humana

**E isso com APENAS 3 FERRAMENTAS.**

Imagina quando voc√™ chegar no N√≠vel 3 (7+ ferramentas)...

**Voc√™ n√£o √© mais "aluno de curso de IA".**

**Voc√™ √© engenheiro de automa√ß√£o.**

---

## ‚úÖ PR√ìXIMA LESSON

**Lesson 3.2:** N√≠vel Intermedi√°rio - 5 Ferramentas

Agora que voc√™ tem agente b√°sico funcionando (3 ferramentas), voc√™ vai EVOLUIR:

**O que vamos adicionar:**
- + Google Tasks (gerenciar follow-ups)
- + Google Sheets (registrar agendamentos)

**O que vai MUDAR na arquitetura:**
- Poliedro 2 (Ferramentas): de 3 ‚Üí 5
- Poliedro 3 (Workflow): adicionar ETAPA 5 (registrar no sheet)
- Poliedro 4 (Erros): novos casos de falha (sheet offline)

**Voc√™ vai aprender:**
- Como adicionar ferramentas SEM quebrar o que j√° funciona
- Quais Poliedros mudam vs quais ficam intactos
- T√©cnica de "diff de prompt" (v1 ‚Üí v2)

Prepare-se. Complexity is scaling up.

---

*Lesson criada com voz de Jos√© Carlos Amorim (MMOS) | Fidelidade: 90%+*
