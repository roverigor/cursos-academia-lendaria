# Aula 2.4 - Dashboard ao Vivo: Visualize Seus KPIs em Tempo Real

**MÃ³dulo:** 2 - Arsenal PrÃ¡tico  
**DuraÃ§Ã£o:** 15 minutos  
**NÃ­vel Bloom:** Create  
**Instrutor:** JosÃ© Carlos Amorim

---

## ğŸ¯ GOAL

Criar **dashboard web ao vivo** que mostra KPIs atualizando em tempo real - tipo GrÃ¡fico de vendas diÃ¡rias + tabela de leads + mÃ©tricas consolidadas. Sem pagar Tableau/Power BI.

**Resultado concreto:** Dashboard funcional com 3 grÃ¡ficos (linha, barra, pizza) conectado a dados reais, rodando no navegador.

---

## ğŸ“ POSITION

VocÃª jÃ¡ tem:
- Dados sendo coletados (scraping)
- Processamento batch (PDFs â†’ CSV)
- API servindo dados (GET /leads)

**Problema:** Visualizar esses dados Ã© chato.

**Sabe aquele momento** que vocÃª precisa **VER** os nÃºmeros de forma rÃ¡pida:
- *"Quantos leads entraram hoje?"*
- *"Qual fonte traz mais conversÃµes?"*
- *"Revenue estÃ¡ crescendo?"*

OpÃ§Ãµes tradicionais:
- **Excel:** EstÃ¡tico, desatualiza rÃ¡pido
- **Google Data Studio:** Lento, complexo de configurar
- **Tableau/Power BI:** R$300-800/mÃªs

**Ou:** Dashboard HTML customizado que **VOCÃŠ controla**.

**Vantagens:**
- Conecta direto na sua API
- Atualiza automaticamente
- Visual bonito (Chart.js)
- Host gratuito (GitHub Pages)
- **Total controle** do layout

---

## ğŸ”„ STEPS

### PASSO 1: Dashboard = HTML + Chart.js (2min)

#### COMPONENTES

**Dashboard web bÃ¡sico:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         DASHBOARD VENDAS            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š Vendas (30d)  â”‚  ğŸ“ˆ Leads (7d)  â”‚
â”‚  [GrÃ¡fico Linha]  â”‚  [GrÃ¡fico Barra]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           ğŸ¥§ Status Leads           â”‚
â”‚          [GrÃ¡fico Pizza]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Total: R$ 150k  â”‚  Leads: 432     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Stack:**
- **HTML** â†’ Estrutura
- **Chart.js** â†’ GrÃ¡ficos bonitos (lib JavaScript gratuita)
- **JavaScript** â†’ Buscar dados da API (fetch)
- **CSS** â†’ Deixar bonito

**Complexidade:** Mais simples que parece. Chart.js faz trabalho pesado.

---

### PASSO 2: Criar Dashboard (6min)

#### PROMPT PARA CLAUDE

```
Criar dashboard HTML com Chart.js:

Dados (exemplo):
- Vendas Ãºltimos 30 dias: Array de {data, valor}
- Leads por fonte (Ãºltimos 7 dias): {fonte: count}
- Status leads: {novo: 120, qualificado: 80, convertido: 32}

Dashboard deve ter:
1. GrÃ¡fico de LINHA: Vendas (30d) - eixo X = datas, Y = R$
2. GrÃ¡fico de BARRA: Leads por fonte (Google, LinkedIn, IndicaÃ§Ã£o...)
3. GrÃ¡fico de PIZZA: Status leads (novo, qualificado, convertido)
4. Cards numÃ©ricos: Total vendas, Total leads, Taxa conversÃ£o

Requisitos:
- Usar Chart.js (CDN, sem npm)
- Layout responsivo (grid CSS)
- Cores profissionais (azul #3498db, verde #27ae60)
- Mock data (depois vou conectar API)
- TÃ­tulo + Ãºltima atualizaÃ§Ã£o (timestamp)

Arquivo Ãºnico: dashboard.html
```

**CLAUDE GERA:**

```html
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Vendas & Leads</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f6fa;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .last-update {
            color: #7f8c8d;
            font-size: 14px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        .metric-value {
            font-size: 36px;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 10px;
        }

        .metric-label {
            color: #7f8c8d;
            font-size: 14px;
            text-transform: uppercase;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }

        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .chart-title {
            color: #2c3e50;
            font-size: 18px;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“Š Dashboard - Vendas & Leads</h1>
        <p class="last-update">Ãšltima atualizaÃ§Ã£o: <span id="timestamp"></span></p>
    </div>

    <!-- MÃ©tricas -->
    <div class="metrics-grid">
        <div class="metric-card">
            <div class="metric-value" id="total-vendas">R$ 0</div>
            <div class="metric-label">Total Vendas (30d)</div>
        </div>
        <div class="metric-card">
            <div class="metric-value" id="total-leads">0</div>
            <div class="metric-label">Total Leads (7d)</div>
        </div>
        <div class="metric-card">
            <div class="metric-value" id="taxa-conversao">0%</div>
            <div class="metric-label">Taxa de ConversÃ£o</div>
        </div>
    </div>

    <!-- GrÃ¡ficos -->
    <div class="charts-grid">
        <div class="chart-container">
            <div class="chart-title">ğŸ“ˆ Vendas - Ãšltimos 30 Dias</div>
            <div class="chart-wrapper">
                <canvas id="vendasChart"></canvas>
            </div>
        </div>

        <div class="chart-container">
            <div class="chart-title">ğŸ“Š Leads por Fonte</div>
            <div class="chart-wrapper">
                <canvas id="leadsChart"></canvas>
            </div>
        </div>

        <div class="chart-container">
            <div class="chart-title">ğŸ¥§ Status dos Leads</div>
            <div class="chart-wrapper">
                <canvas id="statusChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        // Atualizar timestamp
        document.getElementById('timestamp').textContent = new Date().toLocaleString('pt-BR');

        // MOCK DATA (depois substituir por fetch da API)
        const vendasData = {
            labels: ['01/01', '05/01', '10/01', '15/01', '20/01', '25/01', '30/01'],
            values: [12000, 15000, 14500, 18000, 17500, 21000, 23000]
        };

        const leadsData = {
            labels: ['Google Ads', 'LinkedIn', 'IndicaÃ§Ã£o', 'OrgÃ¢nico', 'Email'],
            values: [85, 62, 48, 35, 22]
        };

        const statusData = {
            labels: ['Novo', 'Qualificado', 'Convertido'],
            values: [120, 80, 32],
            colors: ['#3498db', '#f39c12', '#27ae60']
        };

        // Calcular mÃ©tricas
        const totalVendas = vendasData.values.reduce((a, b) => a + b, 0);
        const totalLeads = leadsData.values.reduce((a, b) => a + b, 0);
        const taxaConversao = ((statusData.values[2] / statusData.values.reduce((a, b) => a + b, 0)) * 100).toFixed(1);

        document.getElementById('total-vendas').textContent = `R$ ${(totalVendas / 1000).toFixed(0)}k`;
        document.getElementById('total-leads').textContent = totalLeads;
        document.getElementById('taxa-conversao').textContent = `${taxaConversao}%`;

        // GRÃFICO 1: Vendas (Linha)
        new Chart(document.getElementById('vendasChart'), {
            type: 'line',
            data: {
                labels: vendasData.labels,
                datasets: [{
                    label: 'Vendas (R$)',
                    data: vendasData.values,
                    borderColor: '#3498db',
                    backgroundColor: 'rgba(52, 152, 219, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });

        // GRÃFICO 2: Leads (Barra)
        new Chart(document.getElementById('leadsChart'), {
            type: 'bar',
            data: {
                labels: leadsData.labels,
                datasets: [{
                    label: 'Leads',
                    data: leadsData.values,
                    backgroundColor: '#3498db'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });

        // GRÃFICO 3: Status (Pizza)
        new Chart(document.getElementById('statusChart'), {
            type: 'pie',
            data: {
                labels: statusData.labels,
                datasets: [{
                    data: statusData.values,
                    backgroundColor: statusData.colors
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });

        // FUNÃ‡ÃƒO PARA ATUALIZAR COM DADOS DA API (uso futuro)
        async function atualizarDashboard() {
            try {
                const response = await fetch('http://localhost:5000/dashboard/metrics');
                const data = await response.json();
                
                // Atualizar grÃ¡ficos com data.vendas, data.leads, data.status
                // vendasChart.data.datasets[0].data = data.vendas.values;
                // vendasChart.update();
                
                console.log('Dashboard atualizado!', data);
            } catch (error) {
                console.log('Usando mock data (API nÃ£o conectada)');
            }
        }

        // Atualizar a cada 30 segundos
        setInterval(atualizarDashboard, 30000);
    </script>
</body>
</html>
```

**USAR:**

1. Salva como `dashboard.html`
2. Abre no navegador (duplo clique)
3. **Dashboard funciona imediatamente** com mock data

**Visual profissional em 1 arquivo HTML!** ğŸ‰

---

### PASSO 3: Conectar Ã  API Real (3min)

#### ADICIONAR ENDPOINT NA API

Na API Flask (aula 2.3), adiciona:

```python
@app.route('/dashboard/metrics', methods=['GET'])
def dashboard_metrics():
    # Calcular mÃ©tricas reais do seu banco/CSV/memÃ³ria
    vendas_30d = calcular_vendas()  # Sua lÃ³gica aqui
    leads_7d = contar_leads_fonte()
    status = contar_status_leads()
    
    return jsonify({
        'vendas': {
            'labels': ['01/01', '05/01', ...],
            'values': [12000, 15000, ...]
        },
        'leads': {
            'labels': ['Google', 'LinkedIn', ...],
            'values': [85, 62, ...]
        },
        'status': {
            'labels': ['Novo', 'Qualificado', 'Convertido'],
            'values': [120, 80, 32]
        }
    })
```

#### CONECTAR DASHBOARD â†’ API

No `dashboard.html`, descomenta funÃ§Ã£o:

```javascript
async function atualizarDashboard() {
    const response = await fetch('http://localhost:5000/dashboard/metrics');
    const data = await response.json();
    
    // Atualizar grÃ¡fico vendas
    vendasChart.data.labels = data.vendas.labels;
    vendasChart.data.datasets[0].data = data.vendas.values;
    vendasChart.update();
    
    // Atualizar leads
    leadsChart.data.labels = data.leads.labels;
    leadsChart.data.datasets[0].data = data.leads.values;
    leadsChart.update();
    
    // Atualizar status
    statusChart.data.labels = data.status.labels;
    statusChart.data.datasets[0].data = data.status.values;
    statusChart.update();
    
    // Atualizar mÃ©tricas
    const totalVendas = data.vendas.values.reduce((a, b) => a + b, 0);
    document.getElementById('total-vendas').textContent = `R$ ${(totalVendas / 1000).toFixed(0)}k`;
}

// Atualizar agora e depois a cada 30s
atualizarDashboard();
setInterval(atualizarDashboard, 30000);
```

**Pronto!** Dashboard **atualiza automaticamente** a cada 30 segundos ğŸš€

---

### PASSO 4: Deploy Gratuito (2min)

#### GITHUB PAGES (Host GrÃ¡tis)

**Dashboard Ã© arquivo HTML estÃ¡tico** â†’ GitHub Pages hospeda de graÃ§a.

```bash
# 1. Criar repo no GitHub
git init
git add dashboard.html
git commit -m "Dashboard inicial"
git remote add origin https://github.com/SEU-USER/dashboard.git
git push -u origin main

# 2. Ativar GitHub Pages
# Settings â†’ Pages â†’ Source: main branch â†’ Save
```

**URL pÃºblica:**
`https://seu-user.github.io/dashboard/dashboard.html`

**Abre em qualquer dispositivo!** AtÃ© celular ğŸ“±

---

### PASSO 5: Casos AvanÃ§ados (2min)

#### 1. DASHBOARD MULTI-PÃGINA

**Tabs para seÃ§Ãµes:**
- Tab "Vendas": GrÃ¡ficos revenue
- Tab "Marketing": Leads, CAC, ROI
- Tab "OperaÃ§Ãµes": Tickets, SLA

**Prompt:** *"Adicionar tabs no dashboard com seÃ§Ãµes vendas/marketing/operaÃ§Ãµes"*

#### 2. FILTROS INTERATIVOS

**Dropdown:** "Ãšltimos 7d / 30d / 90d"

Quando muda â†’ Fetch `/dashboard/metrics?periodo=30d` â†’ Atualiza grÃ¡ficos

#### 3. ALERTAS VISUAIS

Se mÃ©trica < threshold â†’ Card fica vermelho

```javascript
if (taxaConversao < 10) {
    document.getElementById('taxa-conversao').style.color = '#e74c3c';  // Vermelho
}
```

#### 4. DASHBOARD PÃšBLICO vs PRIVADO

**PÃºblico:** GitHub Pages (qualquer um acessa URL)

**Privado:** Adiciona autenticaÃ§Ã£o bÃ¡sica na API:

```python
from functools import wraps

def requer_token(f):
    @wraps(f)
    def decorated(*args, **kwargs):
        token = request.headers.get('Authorization')
        if token != 'SEU_TOKEN_SECRETO':
            return jsonify({'erro': 'NÃ£o autorizado'}), 401
        return f(*args, **kwargs)
    return decorated

@app.route('/dashboard/metrics')
@requer_token  # SÃ³ acessa com token
def dashboard_metrics():
    ...
```

Dashboard envia token:
```javascript
fetch(url, {
    headers: {'Authorization': 'SEU_TOKEN_SECRETO'}
})
```

---

## ğŸ“ SÃNTESE

**O que vocÃª criou:**

1. **Dashboard web completo** com Chart.js
   - 3 tipos grÃ¡ficos (linha, barra, pizza)
   - Cards de mÃ©tricas
   - Layout responsivo
   - **1 arquivo HTML** (100 linhas)

2. **IntegraÃ§Ã£o API â†’ Dashboard**
   - Fetch automÃ¡tico a cada 30s
   - Dados reais (nÃ£o mock)
   - AtualizaÃ§Ã£o ao vivo sem refresh

3. **Deploy gratuito** GitHub Pages
   - URL pÃºblica acessÃ­vel de qualquer lugar
   - Sem servidor prÃ³prio
   - Sem custos

4. **Casos de uso:**
   - Dashboard vendas para equipe comercial
   - MÃ©tricas marketing (CAC, ROI, Leads)
   - OperaÃ§Ãµes (SLA tickets, uptime)
   - FinanÃ§as pessoais (gastos, investimentos)

**Skills desbloqueadas:**
- âœ… Chart.js (grÃ¡ficos profissionais)
- âœ… Fetch API (atualizaÃ§Ã£o dinÃ¢mica)
- âœ… Layout responsivo (CSS Grid)
- âœ… Deploy GitHub Pages

**ComparaÃ§Ã£o custos:**
- Tableau: R$800/mÃªs
- Power BI: R$400/mÃªs
- **Seu dashboard:** R$0/mÃªs âœ…

---

## ğŸš€ PRÃ“XIMOS PASSOS

**Desafio:**

Pega 3 mÃ©tricas que vocÃª acompanha hoje (vendas, leads, qualquer KPI) e cria dashboard customizado.

Conecta com sua API ou atÃ© planilha Google (tem API tambÃ©m).

**PrÃ³xima aula (2.5):**
"Scheduler: AutomaÃ§Ãµes que Rodam Sozinhas"

Dashboard mostra dados. Mas **COLETAR** esses dados manualmente ainda Ã© trabalho. PrÃ³xima aula: rodar scripts automaticamente (cron jobs, agendadores).

**Coletar automÃ¡tico + Dashboard ao vivo = Sistema 100% hands-off.** ğŸ’ª

---

## ğŸ’­ REFLEXÃƒO FINAL

**Porque no fundo...**

VocÃª acabou de criar dashboard que empresas cobram R$5-20k para fazer.

Chart.js + 100 linhas HTML = visual profissional que impacta decisÃµes de negÃ³cio.

**Dados sem visualizaÃ§Ã£o = oportunidades perdidas.**

VocÃª agora tem superpoder de **VER padrÃµes** que antes estavam escondidos em planilhas.

Essa visibilidade sozinha jÃ¡ valeu o curso. ğŸ“Šâœ¨

---

**Instrutor:** JosÃ© Carlos Amorim  
**DuraÃ§Ã£o:** 15 minutos  
**Framework:** GPS + DidÃ¡tica LendÃ¡ria + ESPIRAL EXPANSIVA

