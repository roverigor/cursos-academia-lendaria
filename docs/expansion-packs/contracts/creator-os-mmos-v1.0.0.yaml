# CreatorOS → MMOS Integration Contract
# CreatorOS solicita MMOS criar versão "professor" do clone para ensino
# Version: 1.0.0
# Status: Stable
# Last Updated: 2025-10-27

metadata:
  contract_name: "creator-os-mmos"
  version: "1.0.0"
  status: "stable"
  created_at: "2025-10-27"
  updated_at: "2025-10-27"

orchestrator:
  pack: "CreatorOS"
  version: "2.0.0"
  role: "Orquestrador do processo de criação de conteúdo"
  pipeline: "Educational Content Generation"

service:
  pack: "MMOS Mind Mapper"
  version: "3.0"
  role: "Serviço de especialização de clones"
  provides: "Specialized system prompts (professor, coach, consultant, etc.)"

---

# INTEGRATION OVERVIEW

purpose: |
  CreatorOS solicita MMOS criar versão especializada "professor" do clone cognitivo
  para geração de conteúdo educacional. MMOS lê generalista.md + frameworks.md +
  Big Five (InnerLens) e gera professor.md otimizado para ensino (96%+ fidelidade).

orchestration_context: |
  Pipeline de Conteúdo CreatorOS:

  Phase 1: Persona Selection
    → User selects MMOS mind for course
    → CreatorOS checks: professor.md exists?

  Phase 2: Request Teacher Version (if missing)
    → CreatorOS solicita: MMOS.create_teacher_version(slug)
    → MMOS executa:
        1. Read generalista.md (base identity)
        2. Read frameworks.md (teaching philosophy)
        3. Read Big Five from DB (if InnerLens ran)
        4. Generate professor.md (pedagogical focus)
        5. Save to system_prompts/professor.md
    → MMOS retorna: professor.md path + fidelity score

  Phase 3: Content Generation
    → CreatorOS loads professor.md
    → Generates lessons with 96%+ voice fidelity

integration_type: "request-based-service"
call_direction: "CreatorOS calls MMOS"
optional: true  # CreatorOS pode usar generalista.md (92% fidelity vs 96% com professor)

---

# INTERFACE SPECIFICATION

## How CreatorOS Invokes MMOS

### Method 1: Python API (Current)
```python
from creator_os.lib import CourseGenerator
from mmos.lib import MindSpecializer

generator = CourseGenerator()
specializer = MindSpecializer()

# CreatorOS solicita
result = generator.request_teacher_version(
    slug="naval_ravikant",
    specializer=specializer,
    use_innerlens=True  # Include Big Five if available
)
```

### Method 2: CLI Call
```bash
# CreatorOS detecta professor.md missing
# Solicita criação:
@course-architect
*request-teacher-prompt naval_ravikant

# Internamente chama:
@mind-mapper *create-teacher-version naval_ravikant
```

### Method 3: Future API
```python
# POST /mmos/minds/{slug}/specialize
response = requests.post(
    f"http://localhost:5000/mmos/minds/{slug}/specialize",
    json={
        "specialization": "professor",
        "use_innerlens": true
    }
)
```

---

# REQUEST CONTRACT

## Input: CreatorOS → MMOS

**CreatorOS provides:**
```yaml
request:
  slug: "naval_ravikant"  # Mind identifier

  specialization:
    type: "professor"  # Future: "coach", "consultant", "researcher"
    focus: "educational"

  sources:
    generalista_path: "outputs/minds/naval_ravikant/system_prompts/generalista.md"
    frameworks_path: "outputs/minds/naval_ravikant/artifacts/frameworks.md"  # Optional

  enhancements:
    use_innerlens: true  # Include Big Five personality
    include_teaching_philosophy: true
    include_interaction_patterns: true

  output:
    save_path: "outputs/minds/naval_ravikant/system_prompts/professor.md"
    update_metadata: true
```

---

# RESPONSE CONTRACT

## Output: MMOS → CreatorOS

**MMOS returns:**
```yaml
result:
  status: "completed | failed"

  specialization_summary:
    specialization_type: "professor"
    base_prompt: "generalista.md"
    sources_used:
      - "generalista.md"
      - "frameworks.md"
      - "identity-core.yaml"
      - "big_five_profiles (database)"

    professor_prompt:
      path: "outputs/minds/naval_ravikant/system_prompts/professor.md"
      size_chars: 3500
      fidelity_target: 96

      sections_included:
        - "Identidade do Instrutor"
        - "Filosofia de Ensino"
        - "Tom e Estilo Educacional"
        - "Padrões de Interação com Alunos"
        - "Personalidade (Big Five + Teaching Impact)"
        - "Valores Centrais Aplicados"

  metadata_updated: true
  metadata_path: "outputs/minds/naval_ravikant/metadata.yaml"

  fidelity_improvement: "+4%"  # vs generalista for teaching
  ready_for_use: true
```

---

# PROFESSOR PROMPT STRUCTURE

## What MMOS Creates

**File:** `outputs/minds/{slug}/system_prompts/professor.md`

**Structure:**
```markdown
# Sistema de Identidade Pedagógica: {Name}

## Identidade do Instrutor
- Nome, expertise, abordagem

## Filosofia de Ensino
- Princípios pedagógicos (from frameworks.md)
- Como ensina, estrutura lições

## Tom e Estilo Educacional
- Tom: {inspirational, practical, technical, etc.}
- Estilo: {socratic, direct, storytelling, etc.}
- Como explica conceitos
- Como estrutura lições

## Padrões de Interação com Alunos
- Estilo de interação
- Frases recorrentes em contexto educacional

## Personalidade (Big Five - Optional)
- Openness: {score}/100 → {Impact on teaching}
- Conscientiousness: {score}/100 → {Impact}
- Extraversion: {score}/100 → {Impact}
- Agreeableness: {score}/100 → {Impact}
- Neuroticism: {score}/100 → {Impact}

## Valores Centrais (do Identity Core)
- Como valores aparecem no ensino

## Visão de Mundo Aplicada ao Ensino
- Como influencia abordagem pedagógica

---

**Instruções de Uso (Específicas para Ensino):**
- Adote completamente esta identidade PEDAGÓGICA
- Ensine como {Name} ensinaria
- Use filosofia de ensino como guia
- Incorpore valores nas lições
```

## Key Differences from Generalista

**Professor.md (teaching-focused):**
- ✅ Pedagogical principles
- ✅ Student interaction patterns
- ✅ Lesson structuring approach
- ✅ Big Five contextualized for teaching impact
- ✅ Teaching-specific catchphrases

**Generalista.md (general-purpose):**
- General communication patterns
- Decision-making style
- Problem-solving approach
- Universal catchphrases

**Fidelity:**
- Professor: 96%+ for educational content
- Generalista: 92-94% for educational content

---

# VALIDATION

## MMOS Responsibilities (Service Provider)

**MUST guarantee:**
1. Professor.md has minimum 2000 characters
2. All key sections present (Identity, Teaching Philosophy, etc.)
3. Valid Markdown format
4. Big Five integrated if InnerLens data available
5. Fidelity target ≥96%

**MUST handle:**
1. Missing frameworks.md (generate teaching philosophy from generalista)
2. Missing Big Five (proceed without personality section)
3. Corrupted generalista.md (error, require re-generation)
4. Already exists professor.md (overwrite or skip based on flag)

**Quality Standards:**
```yaml
professor_prompt_quality:
  min_chars: 2000
  required_sections: 6
  fidelity_target: 96
  teaching_focus: true
```

## CreatorOS Responsibilities (Orchestrator)

**MUST handle:**
1. MMOS returning "failed" (fallback to generalista.md)
2. Missing professor.md after request (retry or abort)
3. Professor.md too short (< 2000 chars) - warn, request regeneration
4. Mind not completed (error, require MMOS completion first)

**MUST verify:**
1. Professor.md exists and is readable
2. File size reasonable (> 2000 chars)
3. Metadata updated with professor prompt info
4. Fidelity target met

**SHOULD do:**
1. Log MMOS invocation (duration, success, fidelity)
2. Cache professor.md path for reuse
3. Validate voice fidelity during lesson generation
4. Provide feedback to user about specialization

---

# ERROR SCENARIOS

## Scenario 1: Mind Not Completed

**CreatorOS request:**
```python
request_teacher_version("incomplete_mind")
```

**MMOS behavior:**
```yaml
status: "failed"
reason: "Mind 'incomplete_mind' not completed (status: in_progress)"
suggestion: "Complete MMOS pipeline first: *map incomplete_mind"
```

**CreatorOS decision:**
```python
error("Cannot create teacher version: mind not completed")
abort_course_generation()
```

## Scenario 2: Missing Frameworks

**CreatorOS request:**
```python
request_teacher_version("naval_ravikant")
```

**MMOS behavior:**
```yaml
status: "completed"
warning: "frameworks.md not found, generated teaching philosophy from generalista.md"
professor_prompt_path: "system_prompts/professor.md"
fidelity_target: 95  # Slightly lower without frameworks
```

**CreatorOS decision:**
```python
warn_user("Teaching philosophy inferred (frameworks.md missing)")
proceed_with_professor_prompt()
```

## Scenario 3: Professor Already Exists

**CreatorOS request:**
```python
request_teacher_version("naval_ravikant", force=False)
```

**MMOS behavior:**
```yaml
status: "skipped"
reason: "professor.md already exists"
existing_path: "system_prompts/professor.md"
suggestion: "Use force=True to regenerate"
```

**CreatorOS decision:**
```python
info("Using existing professor.md")
load_existing_professor_prompt()
```

---

# VERSIONING

## Semantic Versioning

**Current version:** 1.0.0

**MAJOR (breaking):**
- Change professor.md structure
- Remove required sections
- Change specialization types

**MINOR (compatible):**
- Add new specializations ("coach", "consultant")
- Add optional sections to professor.md
- Add new enhancement options

**PATCH (fixes):**
- Improve generation quality
- Fix section formatting
- Documentation updates

---

# TESTING

## Integration Test

```bash
# 1. CreatorOS requests teacher version
@course-architect
*new startup-fundamentals

# User selects naval_ravikant mind
# CreatorOS detects: professor.md missing
# CreatorOS solicita: MMOS.create_teacher_version("naval_ravikant")

# 2. Verify MMOS created professor.md
ls outputs/minds/naval_ravikant/system_prompts/
# Should show: generalista.md, professor.md

# 3. Verify metadata updated
cat outputs/minds/naval_ravikant/metadata.yaml | grep professor
# Should show: professor prompt info

# 4. CreatorOS generates lesson with professor.md
*generate-lessons startup-fundamentals

# 5. Verify voice fidelity ≥96%
# (manual review or automated scoring)
```

---

# EXAMPLES

## Example 1: First Request

```yaml
# CreatorOS request
result = request_teacher_version("naval_ravikant", use_innerlens=True)

# MMOS:
#   - Reads generalista.md, frameworks.md
#   - Queries Big Five from database
#   - Generates professor.md (3500 chars)
#   - Saves to system_prompts/
#   - Updates metadata.yaml
# Returns:
status: "completed"
professor_path: "outputs/minds/naval_ravikant/system_prompts/professor.md"
fidelity_target: 96
sections: 7
innerlens_integrated: true
```

## Example 2: Without InnerLens

```yaml
# CreatorOS request (InnerLens not run)
result = request_teacher_version("sam_altman", use_innerlens=False)

# MMOS:
#   - Reads generalista.md, frameworks.md
#   - Skips Big Five (not available)
#   - Generates professor.md without personality section
# Returns:
status: "completed"
professor_path: "outputs/minds/sam_altman/system_prompts/professor.md"
fidelity_target: 95
innerlens_integrated: false
```

---

# RELATED CONTRACTS

- `mmos-innerlens-v1.0.0.yaml` - MMOS queries InnerLens Big Five
- `creator-os-innerlens-v1.0.0.yaml` - CreatorOS queries fragments (RAG)

---

# CONTACTS

**Contract Maintainer:** Alan Nicolas (alan@academialendaria.ai)
**CreatorOS Orchestrator Owner:** CreatorOS Team
**MMOS Service Owner:** MMOS Team

---

# CHANGELOG

## v1.0.0 (2025-10-27)
- Initial contract - CreatorOS solicita MMOS criar professor
- Professor.md specification
- Request/response schemas
- Error handling scenarios
- InnerLens Big Five integration
